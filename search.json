[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "PortfolioLocal",
    "section": "",
    "text": "This is a Quarto website.\nTo learn more about Quarto websites visit https://quarto.org/docs/websites.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This is a portfolio of GIS based work I have created in RStudio, using techniques I have learned at university, and techniques I have taught myself. I am a BA Geography with Social Data Science student at University College London with an interest in GIS and mapping data. This portfolio shows many pieces of work I have produced in RStudio, from geographic reports on crime, to explaining fundamental concepts in mapping with examples.\nIf there are any questions or comments regarding the pages uploaded, please email me at vmistri91@gmail.com.\nAdditionally, if you would like me to produce some maps using geographic data, please contact me at vmistri91@gmail.com for inquiries."
  },
  {
    "objectID": "social_atlas_weapons.html",
    "href": "social_atlas_weapons.html",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "",
    "text": "This is the first page to be uploaded to this website, and more are to follow shortly on other mapping techniques in RStudio, and other social atlas reports.\nThis project was produced for a coursework assessment as part of my Geography degree at University College London. The aim was to produce a variety of maps to create a ‘social atlas’ of any set of data across an area of the United Kingdom. This particular project studies weapon possession crimes in West Midlands County, and uses a variety of different map types to illustrate this.\nFeel free to skip to the maps and analysis of these maps in the report. If you are interested in the coding, design, methodology, and many other choices made, I recommend reading the full report to understand why certain decisions were made in this report.\nThe main reason weapon possession crimes were chosen for this project was because these have been brought increasingly to the public eye over recent years, with celebrities, such as Idris Elba calling for an “immediate ban on machetes and ‘zombie’ knives”. West Midlands County has the highest rates of weapon possession incidents in the United Kingdom as of 2024, with Birmingham having the highest rates of knife crime in this region.\nI would like to thank Professor Justin van Dijk, Lecturer in Social and Geographic Data Science at UCL, for providing assistance and insights to help me create this report, and teaching me some of the techniques used in this report in RStudio. You can visit his website here: https://mappingdutchman.com/.\nIf you would like to reference this report please use the following reference:\nMistri V. (2024) ‘A GIS study of weapon possession crimes in West Midlands County (2023)’, Vishal Mistri GIS Portfolio, https://vmistri91.github.io/Portfolio/social_atlas_weapons.html.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#background-information",
    "href": "social_atlas_weapons.html#background-information",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "",
    "text": "This is the first page to be uploaded to this website, and more are to follow shortly on other mapping techniques in RStudio, and other social atlas reports.\nThis project was produced for a coursework assessment as part of my Geography degree at University College London. The aim was to produce a variety of maps to create a ‘social atlas’ of any set of data across an area of the United Kingdom. This particular project studies weapon possession crimes in West Midlands County, and uses a variety of different map types to illustrate this.\nFeel free to skip to the maps and analysis of these maps in the report. If you are interested in the coding, design, methodology, and many other choices made, I recommend reading the full report to understand why certain decisions were made in this report.\nThe main reason weapon possession crimes were chosen for this project was because these have been brought increasingly to the public eye over recent years, with celebrities, such as Idris Elba calling for an “immediate ban on machetes and ‘zombie’ knives”. West Midlands County has the highest rates of weapon possession incidents in the United Kingdom as of 2024, with Birmingham having the highest rates of knife crime in this region.\nI would like to thank Professor Justin van Dijk, Lecturer in Social and Geographic Data Science at UCL, for providing assistance and insights to help me create this report, and teaching me some of the techniques used in this report in RStudio. You can visit his website here: https://mappingdutchman.com/.\nIf you would like to reference this report please use the following reference:\nMistri V. (2024) ‘A GIS study of weapon possession crimes in West Midlands County (2023)’, Vishal Mistri GIS Portfolio, https://vmistri91.github.io/Portfolio/social_atlas_weapons.html.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#data-sources",
    "href": "social_atlas_weapons.html#data-sources",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Data Sources",
    "text": "Data Sources\nAll spatial boundaries have been downloaded from the ONS Open Geography Portal https://geoportal.statistics.gov.uk/. Boundaries used include: 2021 Lower Super Output Area (LSOA) Boundaries UK, 2023 Local Authority District Boundaries UK, 2018 Metropolitan County Boundaries UK, 2023 Ward Boundaries UK.\nPolice crime data can be downloaded from https://data.police.uk/data/, and the West Midlands Police Force was selected, and data was downloaded across all months of 2023.\nTo obtain Index of Multiple Deprivation (IMD) data by LSOA, a free account can be made on the Consumer Data Research Centre website https://data.cdrc.ac.uk/, allowing 2019 IMD scores by LSOA to be downloaded as a .csv file.\nTo obtain 2021 census data variables (population by LSOA, unemployment by ward), the Nomis website can be used https://www.nomisweb.co.uk/.\nPopulation data from 2020 in raster format, at a 1km resolution for the United Kingdom was downloaded from WorldPop via this link https://hub.worldpop.org/geodata/summary?id=34480.\nOpenStreetMap data was downloaded through R using the ‘osmdata’ package.\nAll of the files used in this report can be found in this Google Drive folder https://drive.google.com/drive/folders/1oj63EMxMxPGKqXR8EDShEcOmMj-VKtAF?usp=sharing.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#loading-packages",
    "href": "social_atlas_weapons.html#loading-packages",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Loading Packages",
    "text": "Loading Packages\nThese are all the packages used in this project. The main packages used to create maps using spatial data are ‘sf’, ‘sp’, ‘tmap’.\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(sf)\nlibrary(sp)\nlibrary(spData)\nlibrary(spgwr)\nlibrary(tmap)\nlibrary(osmdata)\nlibrary(osmextract)\nlibrary(spdep)\nlibrary(tidyverse)\nlibrary(spatstat)\nlibrary(terra)\nlibrary(dbscan)\nlibrary(dodgr)\nlibrary(geodist)\nlibrary(RColorBrewer)",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#data-preparation",
    "href": "social_atlas_weapons.html#data-preparation",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Data Preparation",
    "text": "Data Preparation\nPreparation steps undertaken in this section are to create large maps showing crime distribution and other variables of interest across West Midlands County.\nFirstly, boundary geopackages need to be loaded and prepared in R.\n\n#Load LSOA 2021 geopackage in\nLSOA_eng_2021 &lt;- st_read(\"2021_LSOA.gpkg\")\n\nReading layer `LSOA_2021_EW_BGC_V3' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\2021_LSOA.gpkg' \n  using driver `GPKG'\nSimple feature collection with 35672 features and 7 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 82668.52 ymin: 5352.6 xmax: 655653.8 ymax: 657539.4\nProjected CRS: OSGB36 / British National Grid\n\n#Inspect CRS\nst_crs(LSOA_eng_2021) #=27700\n\nCoordinate Reference System:\n  User input: OSGB36 / British National Grid \n  wkt:\nPROJCRS[\"OSGB36 / British National Grid\",\n    BASEGEOGCRS[\"OSGB36\",\n        DATUM[\"Ordnance Survey of Great Britain 1936\",\n            ELLIPSOID[\"Airy 1830\",6377563.396,299.3249646,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4277]],\n    CONVERSION[\"British National Grid\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",49,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-2,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996012717,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",400000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",-100000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"United Kingdom (UK) - offshore to boundary of UKCS within 49°45'N to 61°N and 9°W to 2°E; onshore Great Britain (England, Wales and Scotland). Isle of Man onshore.\"],\n        BBOX[49.75,-9.01,61.01,2.01]],\n    ID[\"EPSG\",27700]]\n\n#Extract out relevant LSOAs in the West Midlands\nLSOA_WestMidlands &lt;- LSOA_eng_2021[grepl('Birmingham|Coventry|Dudley|Sandwell|Solihull|Walsall|Wolverhampton', LSOA_eng_2021$LSOA21NM), ]\n\n#For maps produced to show the 7 local authorities outlined in West Midlands County, Local Authority gpkg is loaded in\nLA_eng_2023 &lt;- st_read(\"Local_Authorities_2023.gpkg\")\n\nReading layer `LAD_DEC_2023_UK_BGC' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\Local_Authorities_2023.gpkg' \n  using driver `GPKG'\nSimple feature collection with 361 features and 8 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -116.1928 ymin: 5352.6 xmax: 655653.8 ymax: 1220299\nProjected CRS: OSGB36 / British National Grid\n\n#Inspect CRS\nst_crs(LA_eng_2023) #=27700\n\nCoordinate Reference System:\n  User input: OSGB36 / British National Grid \n  wkt:\nPROJCRS[\"OSGB36 / British National Grid\",\n    BASEGEOGCRS[\"OSGB36\",\n        DATUM[\"Ordnance Survey of Great Britain 1936\",\n            ELLIPSOID[\"Airy 1830\",6377563.396,299.3249646,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4277]],\n    CONVERSION[\"British National Grid\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",49,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-2,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996012717,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",400000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",-100000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"United Kingdom (UK) - offshore to boundary of UKCS within 49°45'N to 61°N and 9°W to 2°E; onshore Great Britain (England, Wales and Scotland). Isle of Man onshore.\"],\n        BBOX[49.75,-9.01,61.01,2.01]],\n    ID[\"EPSG\",27700]]\n\n#Extract out relevant LAs in the West Midlands\nLA_WestMidlands &lt;- LA_eng_2023[grepl('Birmingham|Coventry|Dudley|Sandwell|Solihull|Walsall|Wolverhampton', LA_eng_2023$LAD23NM), ]\n\nCrime data is downloaded as 12 .csv files for each month of 2023. Before working in R, these files have been placed into a folder called \"all-crime\" on my PC.\n\n#Load in all 2023 West Midlands Crime Data\nall_crime_wm &lt;- list.files(path = \"all-crime/\", full.names = TRUE, recursive = TRUE) |&gt;\n  lapply(read_csv) |&gt;\n  bind_rows()\n\nSteps to prepare the crime data by LSOA code and to filter by possession of weapons crimes:\n\n#Using all crime data and merging by lsoa code\n#Aggregation and count\nweapon_possession_2 &lt;- all_crime_wm[grepl('Possession of weapons', all_crime_wm$`Crime type`), ]\nweapons_LSOA&lt;- aggregate(weapon_possession_2$`Crime ID`, by=list(weapon_possession_2$`LSOA code`,weapon_possession_2$`Crime type`), FUN=length)\n\n#Rename columns\nnames(weapons_LSOA)&lt;- c(\"LSOA\",\"Crime\",\"Count\")\nweapons_LSOA&lt;- spread(weapons_LSOA,Crime, Count)\n\nThe weapon crime data can be merged to the LSOA spatial file by LSOA code as shown below:\n\n#Merge spatial LSOA file with the aggregated possession of weapons data\nWestMidlands_WeaponPossession&lt;- merge(LSOA_WestMidlands, weapons_LSOA, by.x=\"LSOA21CD\", by.y=\"LSOA\", all.x=T)\n\n#Replace all NAs with 0\nWestMidlands_WeaponPossession[is.na(WestMidlands_WeaponPossession)] = 0\n\nPopulation data can be loaded in and merged to the WestMidlands_WeaponPossession spatial file with the same method as above:\n\n#Load in population data by LSOA\npop21_lsoa &lt;- read.csv('LSOA2021_population_sa.csv')\n\n#Merge this dataset with the larger spatial dataset above\nWestMidlands_WeaponPossession&lt;- merge(WestMidlands_WeaponPossession, pop21_lsoa, by.x=\"LSOA21CD\", by.y=\"lsoa21_code\", all.x=T)\n\n#Replace all NAs with 0\nWestMidlands_WeaponPossession[is.na(WestMidlands_WeaponPossession)] = 0\n\nIMD data can be loaded in and merged to the WestMidlands_WeaponPossession spatial file with the same method as above:\n\n#Load in IMD dataset\nuk_imd_19 &lt;- read.csv('uk_imd2019.csv')\n\n#Merge this dataset with the WestMidlands_WeaponPossession dataset \nWestMidlands_WeaponPossession&lt;- merge(WestMidlands_WeaponPossession, uk_imd_19, by.x=\"LSOA21CD\", by.y=\"LSOA\", all.x=T)\n\n#Replace all NAs with 0\nWestMidlands_WeaponPossession[is.na(WestMidlands_WeaponPossession)] = 0\n\nThe variable name 'Possession of Weapons' can be shortened to an easy to write variable name which has no spaces.\n\n#Rename Possession of weapons variable to shorter name\ncolnames(WestMidlands_WeaponPossession)[colnames(WestMidlands_WeaponPossession) == \"Possession of weapons\"] &lt;- \"weapon_possession\"\n\nA new variable should be created to show the rate of weapon crimes by the population of each LSOA. This is because weapon crimes can not be displayed on a map without accounting for the population/size of LSOAs, as this would make a less accurate map, and many crime trends would be masked. For example, Birmingham city centre LSOAs would have the highest weapon crime counts, but accounting for the population in each LSOA would produce different trends and a more accurate map to show weapon possession crime rates in the county.\n\n#Create new variable to show rate of weapons crime using the pop21 variable and crime variable\nWestMidlands_WeaponPossession &lt;- WestMidlands_WeaponPossession |&gt;\n  mutate(weapon_rate = (weapon_possession/as.numeric(WestMidlands_WeaponPossession$pop2021)) * 10000)\n\nIn this case, 'weapon_rate' is the number of weapon possession crimes in each LSOA per 10000 people.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#creating-basic-choropleth-maps",
    "href": "social_atlas_weapons.html#creating-basic-choropleth-maps",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Creating basic choropleth maps",
    "text": "Creating basic choropleth maps\nIt is important in this report to know the names of the locations being discussed across West Midlands County, as shown in this map. (Source: https://www.pinterest.co.uk/pin/542261611378585403/).\n\n\n\n\n\n\n\n\n\nTo test if all of the above code has worked, this basic choropleth map showing weapon possession crime rates across LSOAs in West Midlands County has been created.\n\ntm_shape(WestMidlands_WeaponPossession) + \n  tm_fill(\"weapon_rate\", \n          palette = \"Blues\", \n          style = \"quantile\", \n          n=9, \n          title = \"Rate of possession of weapons crimes\") +\n  tm_borders(alpha=.4) +\n  tm_layout(legend.text.size = 0.6, \n            legend.title.size = 1, \n            frame = FALSE, \n            legend.outside = TRUE)\n\n\n\n\n\n\n\n\nThis map does effectively show how weapon crime rates are distributed, but this map can be made more presentable. Firstly the colour palette has been changed to \"RdPu\" which is from the RColourBrewer package, which provides a range of different pre-made colour palettes that can be used in maps. Additionally, the style has been changed to \"fixed\" indicating that the class breaks on this map are going to be pre-specified, as shown in the 'breaks =' line of the code chunk. Borders have been added around each local authority for clarity, and the 'tm_layout' chunk allows elements such as the legend, title and font size to be altered in the map. A compass and scale bar should be included in all maps, and credits for each data source are provided in the map using 'tm_credits'.\n\n#Create detailed map to show the rates of weapons crimes in the West Midlands\ntm_shape(WestMidlands_WeaponPossession) +\n  tm_fill(col = \"weapon_rate\",\n    style = \"fixed\",\n    palette = \"RdPu\",\n    n = 9,\n    #Breaks are chosen fixed with these intervals after analysis of the data shown on the quick map above and viewing the data distribution\n    breaks = c(0, 0.1, 7.5, 15, 20, 30, 40, 60, 100, 887.0), \n    title = \"Rate of Weapon Crimes\") +\n  tm_borders(lwd=0.1, \n             col = 'Lightgrey', \n             alpha = 0.1) +\n  tm_shape(LA_WestMidlands) +\n  tm_borders(lwd=2, \n             col = 'Black', \n             alpha = 1) +\n  tm_layout(main.title = \"Rate of Weapon Possession Crimes in West Midlands County - 2023\",\n    main.title.fontface = 2,\n    fontfamily = \"Mukta\",\n    legend.outside = TRUE,\n    frame = FALSE, \n    legend.outside.position = \"right\",\n    legend.title.size = 1,\n    legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n    position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n    position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: West Midlands Police, ONS, Nomis',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nA MAJOR NOTE FOR ALL MAPS PRODUCED: Titles, axes labels, credits and scale bars may not fit on this webpage. When reproducing the code in R, increase the size of the plot window, and the these labels will all fit.\nThis map appears to show that areas in Central Birmingham, Central Wolverhampton and Central Coventry see the highest rates of weapon possession crimes, with most of Solihull, except the city centre, having the lowest rates. An issue of this map is that each zone is a different size, due to how census data is measured in the United Kingdom in Output Areas. This LSOA map is prone to the effects of the Multiple Aerial Unit Problem (MAUP), where trends within each LSOA can be masked due to the ‘zoning effect’. The crime point data has all been aggregated at the LSOA level, but each LSOA is differently sized, so this can create inconsistencies in the data analysis. To understand fully the issues faced by the MAUP, two useful readings are by Wong (2009), https://www.sciencedirect.com/science/article/abs/pii/B9780080449104004752 and Lee (2019) https://www.tandfonline.com/doi/full/10.1080/13658816.2018.1542699.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#using-a-tessalated-hexagon-map",
    "href": "social_atlas_weapons.html#using-a-tessalated-hexagon-map",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Using a tessalated hexagon map",
    "text": "Using a tessalated hexagon map\nTo make the issue of the MAUP less severe, West Midlands County can be divided up into equally sized 500 metre hexagons, which crimes and population data can be aggregated into, to mitigate against the effects of the ‘zoning effect’.\nFirst the outline of West Midlands County needs to be selected.\n\n#Load in Metropolitan County gpkg data\nMC_2018 &lt;- st_read(\"Metropolitan_Counties_2018.gpkg\")\n\nReading layer `Metropolitan_Counties_December_2018_GCB_in_England' from data source `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\Metropolitan_Counties_2018.gpkg' \n  using driver `GPKG'\nSimple feature collection with 6 features and 7 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 318351.7 ymin: 272206.9 xmax: 475119.5 ymax: 576160.1\nProjected CRS: OSGB36 / British National Grid\n\n#Check crs\nst_crs(MC_2018) #27700\n\nCoordinate Reference System:\n  User input: OSGB36 / British National Grid \n  wkt:\nPROJCRS[\"OSGB36 / British National Grid\",\n    BASEGEOGCRS[\"OSGB36\",\n        DATUM[\"Ordnance Survey of Great Britain 1936\",\n            ELLIPSOID[\"Airy 1830\",6377563.396,299.3249646,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4277]],\n    CONVERSION[\"British National Grid\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",49,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-2,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996012717,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",400000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",-100000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"United Kingdom (UK) - offshore to boundary of UKCS within 49°45'N to 61°N and 9°W to 2°E; onshore Great Britain (England, Wales and Scotland). Isle of Man onshore.\"],\n        BBOX[49.75,-9.01,61.01,2.01]],\n    ID[\"EPSG\",27700]]\n\n#Extract all West Midlands County outline data from the large main dataframe\nWest_Midlands_County &lt;- MC_2018[grepl('West Midlands', MC_2018$mcty18nm), ]\n\nAll weapon possession crimes then need to then be filtered out to those which occur in West Midlands County.\n\n#Filter out weapon crimes for all of West Midlands County\nall_crime_weapon_possession &lt;- all_crime_wm |&gt;\n  filter(`Crime type` == \"Possession of weapons\" & !is.na(Longitude) & !is.na(Latitude)) |&gt;\n  #Keep longitude/latitude columns\n  dplyr::select(Longitude, Latitude) |&gt;\n  #Transform into point spatial dataframe\n  st_as_sf(coords = c(\"Longitude\", \"Latitude\"), crs = 4236) |&gt;\n  #Transform CRS into 27700 for BNG\n  st_transform(27700)\n\nThe hexagonal grid can be created around all of the weapon possession crimes next. 'c(500,500)' specifies the size of each polygon, and by specifying 'square = FALSE', the polygons in the grid will all be hexagon shaped.\n\n#Make hexagonal grid\narea_honeycomb_grid = st_make_grid(all_crime_weapon_possession, \n                                   c(500, 500), \n                                   what = \"polygons\", \n                                   square = FALSE)\n#Sf and add grid ID\nhoneycomb_grid_sf = st_sf(area_honeycomb_grid) %&gt;%\n  mutate(grid_id = 1:length(lengths(area_honeycomb_grid)))\n\nThe number of weapon crimes in each hexagon can be counted, and these hexagons can be clipped to the West Midlands County boundary created 3 chunks above.\n\n#Count number of weapon crimes in each grid\nhoneycomb_grid_sf$weapon_possession = lengths(st_intersects(honeycomb_grid_sf, all_crime_weapon_possession))\n#Clip to West Midlands Boundary\nhoneycomb_grid_wm &lt;- honeycomb_grid_sf |&gt;\n  st_intersection(West_Midlands_County)\n\nWarning: attribute variables are assumed to be spatially constant throughout\nall geometries",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#applying-raster-population-data-to-hexagon-grid-map",
    "href": "social_atlas_weapons.html#applying-raster-population-data-to-hexagon-grid-map",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Applying raster population data to hexagon grid map",
    "text": "Applying raster population data to hexagon grid map\nInstead of using NOMIS 2021 population census data to create the weapon possession rate per 1000 people, raster population data needs to be used. This data covers the entire United Kingdom at 1 kilometre resolution, showing population estimates for each kilometre squared grid. This data can be merged to fit into the hexagons, and then the rate can be calculated via the steps below.\nFirstly, the raster population data needs to be loaded into R.\n\n#Load raster population data for 2020 UK\npop2020 &lt;- rast(\"gbr_ppp_2020_1km_Aggregated.tif\")\n#Transform projection to EPSG:27700\npop2020 &lt;- pop2020 |&gt; project(\"epsg:27700\")\n#Check how this is plotted\nplot(pop2020)\n\n\n\n\n\n\n\n\nThis is useful, but this data needs to be cropped to fit the specific region in this study.\n\n#Crop and mask raster data to fit into the honeycomb area\npop2020_wm &lt;- crop(pop2020, honeycomb_grid_wm)\npop2020_wm &lt;- mask(pop2020_wm, honeycomb_grid_wm)\n#Check how this is plotted\nplot(pop2020_wm)\n\n\n\n\n\n\n\n\nThis now shows population estimates in 1km grids across West Midlands County, but this still needs to be merged to the hexagon map spatial file.\nTo do this, the raster data needs to be aggregated and then added to the hexagon spatial dataframe. The function to aggregate the data 'fun' is set to the mean.\n\n#Aggregate\nwm_hex_pop &lt;- extract(pop2020_wm, honeycomb_grid_wm, fun = mean)\n#Add to spatial dataframe\nhoneycomb_grid_wm &lt;- honeycomb_grid_wm |&gt;\n  st_as_sf() |&gt;\n  mutate(population2020 = wm_hex_pop$gbr_ppp_2020_1km_Aggregated)\n\nThe results of this can be plotted in a map to check if the tasks have been conducted correctly.\n\n#Plot map of population in each 500m hexagon in West Midlands County\ntm_shape(LA_WestMidlands) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_shape(honeycomb_grid_wm) +\n  tm_fill(col = \"population2020\",\n          palette = 'YlGnBu',\n          style = \"quantile\",\n          n=5,\n          title = \"Population Count\",\n          id = \"grid_id\",\n          showNA = FALSE,\n          alpha = 0.6,\n          popup.vars = c(\"Population Count: \" = \"population2020\"),\n          popup.format = list(population2020 = list(format = \"f\", digits = 0))) +\n  tm_borders(col = \"grey40\", \n             lwd = 0.7) +\n  tm_layout(main.title = \"Population Count in 500 metre hexagons in West Midlands County - 2020\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.position = c(\"left\", \"top\"),\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0,5,10,15,20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits(\"Data Source: ONS, WorldPop\",\n             position = c('right', 'bottom'),\n             fontface = 'italic', \n             size = 0.5)\n\n\n\n\n\n\n\n\nThis map provides a view into how the population is distributed in the county. Birmingham and Coventry have the highest number of residents, and Solihull has the lowest, with most residents concentrated in the north. This map will be useful to refer to throughout the study to understand how population density is inherently linked with the occurrence of weapon possession crimes.\nNow that each hexagon contains data for the number of weapon crimes and population, these two variable can be manipulated to create a weapon possession rate per 1000 people variable to be used throughout the study.\n\n#Calculate weapon crime rate per 1000 people variable using the newly created population variable\nhoneycomb_grid_wm$weaponcrime_rate &lt;- (honeycomb_grid_wm$weapon_possession/honeycomb_grid_wm$population2020)*1000",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#map-of-weapon-possession-crime-rates-in-west-midlands-county",
    "href": "social_atlas_weapons.html#map-of-weapon-possession-crime-rates-in-west-midlands-county",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Map of Weapon Possession Crime Rates in West Midlands County",
    "text": "Map of Weapon Possession Crime Rates in West Midlands County\nUsing the variable created in the previous step, and the presentation standards outlined in the first maps created, a final map of weapon possession crime rates in the study area can be produced and analysed. The palette has now been selected using a colour choice of my design, where areas with a crime rate of 0 are indicted in green, and areas with increasing crime rates transition from yellow to red.\n\n#Create hex weapon crime rate per 1000 map\ntm_shape(LA_WestMidlands) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_shape(honeycomb_grid_wm) +\n  tm_fill(col = \"weaponcrime_rate\",\n          palette = c(\"#009900\", \"#ffff00\", \"#ffcc00\", \"#ffa600\", \"#ff7300\", \"#ff4d00\", \"#ff2600\", \"#ff0000\"),\n          style = \"fixed\",\n          n=8,\n          breaks = c(0,0.1,0.5,0.9,1.5,4.0,10,36,631),\n          title = \"Weapon Possession Crime Rate per 1000 people\",\n          id = \"grid_id\",\n          showNA = FALSE,\n          alpha = 0.6,\n          popup.vars = c(\"Weapon Possession Crime Rate per 1000 people: \" = \"weaponcrime_rate\"),\n          popup.format = list(weaponcrime_rate = list(format = \"f\", digits = 0))) +\n  tm_borders(col = \"grey40\", \n             lwd = 0.7) +\n  tm_layout(main.title = \"Weapon Possession Crime Rate in West Midlands County - 2023\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.position = c(\"left\", \"top\"),\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0,5,10,15,20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits(\"Data Source: ONS, West Midlands Police, WorldPop\",\n             position = c('right', 'bottom'),\n             fontface = 'italic', \n             size = 0.5)\n\n\n\n\n\n\n\n\nAll 7 local authorities’ city centres have the highest weapon crime rates, but there are substantial variations in the rates occurring across the county.\nThe authority of Solihull has very rates of weapon crimes, except the city centre which has many hexagons coloured in amber, and some other hexagons located just south in the deep red colour. Birmingham has the greatest number hexagons with weapon crimes occurring, with over half of its area having a minimum of 0.1 weapon crimes occurring per 1000 people. These higher crime rates are mostly concentrated around Birmingham city centre. This pattern is similar for the other authorities, most evident in Coventry and Wolverhampton.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#spatial-autocorrelation",
    "href": "social_atlas_weapons.html#spatial-autocorrelation",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Spatial Autocorrelation",
    "text": "Spatial Autocorrelation\nWhile the hexagon map produced above is useful for identifying weapon possession crime trends, further geospatial queries and techniques can be conducted on the dataset. One useful technique is spatial autocorrelation, which measures the degree to which similar values (of crime) occur near eachother in a study region, in a positive or negative manner. This concept links to Tobler’s Fist Law of Geography which is “Everything is related to everything else, but near things are more related than distant things”, a foundational concept in GIS.\nIn order to conduct spatial autocorrelation, the neighbour radius of each hexagon needs to be defined, to conduct a spatial weights matrix, which helps to quantify the influence of a particular hexagon on surrounding hexagons. This is used to calculate Global and Local measures of Spatial Autocorrelation.\nIn this particular study, a fixed distance neighbour definition is used, which defines a hexagon’s neighbours as spatial units which lie within a fixed distance (in this case 1500 metre radius) of the particular hexagon.\n\n#Calculate fixed distance neighbours\nhex_neighbours_fd &lt;- dnearneigh(st_geometry(st_centroid(honeycomb_grid_wm)),\n                                 0, 1500)\n\nWarning: st_centroid assumes attributes are constant over geometries\n\n#Calculate centroids of all hex grids in West Midlands county\nhex_centroid &lt;- honeycomb_grid_wm |&gt;\n  st_centroid()\n\nWarning: st_centroid assumes attributes are constant over geometries\n\n#Plot fixed distance neighbours\nplot(hex_neighbours_fd, st_geometry(hex_centroid), col = \"blue\", pch = 20, cex = 0.5)\n\n\n\n\n\n\n\n#Create neighbours list\nhex_spatial_weights_fd &lt;- hex_neighbours_fd |&gt;\n  nb2listw(style = \"W\")\n\nCentroids of each hexagon are used in the neighbour determination, as this provides a uniform method of defining where the 1500 metre radius should be drawn from each hexagon.\nGlobal spatial autocorrelation measures identify the degree of clustering or dispersion of the data in the entire study area. The most commonly used global method is Moran’s I, which quantifies the degree of autocorrelation, providing correlation coefficients between an area and its neighbours. A score is provided between 1 and -1, with 1 indicating perfect clustering, and -1 indicating perfect dispersion across the region.\n\n#Create a Moran's plot\nmoran.plot(honeycomb_grid_wm$weaponcrime_rate, listw = hex_spatial_weights_fd)\n\n\n\n\n\n\n\n#Conduct Moran's I\nmoran_fd &lt;- honeycomb_grid_wm |&gt;\n  pull(weaponcrime_rate) |&gt;\n  as.vector() |&gt;\n  moran.test(hex_spatial_weights_fd)\n\n#Inspect result\nmoran_fd\n\n\n    Moran I test under randomisation\n\ndata:  as.vector(pull(honeycomb_grid_wm, weaponcrime_rate))  \nweights: hex_spatial_weights_fd    \n\nMoran I statistic standard deviate = 15.123, p-value &lt; 2.2e-16\nalternative hypothesis: greater\nsample estimates:\nMoran I statistic       Expectation          Variance \n     3.944465e-02     -2.251745e-04      6.880482e-06 \n\n#=3.944465e-02\n\nThe overall value of Moran’s I is 3.944465e-02, indicating there is little to no spatial autocorrelation among weapon possession crime rates in the study area. This indicates that areas with neither high crime rates or low crime rates are clustered among similar areas.\nLocal spatial autocorrelation measures can also be conducted across the study area, which provide a Moran’s I value for each individual hexagon, and can be useful to identify local clusters and outliers.\n\n#Conduct Local Moran's I\nlocal_moran_fd &lt;- honeycomb_grid_wm |&gt;\n  pull(weaponcrime_rate) |&gt;\n  as.vector() |&gt;\n  localmoran(hex_spatial_weights_fd)\n\n#Inspect result\nhead(local_moran_fd)\n\n            Ii          E.Ii       Var.Ii       Z.Ii Pr(z != E(Ii))\n1  0.005365600 -1.622965e-06 0.0004225424  0.2611046      0.7940119\n2  0.005542948 -1.622965e-06 0.0004790979  0.2533120      0.8000271\n3  0.002867228 -1.622965e-06 0.0004490528  0.1353815      0.8923103\n4  0.004524124 -1.622965e-06 0.0004225424  0.2201685      0.8257400\n5  0.002928387 -1.622965e-06 0.0003989776  0.1466881      0.8833782\n6 -0.005078336 -1.779934e-06 0.0004375655 -0.2426876      0.8082474\n\n\nThe variable names can be renamed for clarity and these values can be binded to the hexagon grid data frame.\n\n#Update heading names\nlocal_moran_fd &lt;- as.data.frame(local_moran_fd)\nnames(local_moran_fd) &lt;- c(\"LMI_Ii\", \"LMI_eIi\", \"LMI_varIi\", \"LMI_zIi\", \"LMI_sigP\")\n\n#Join the data frames together\nhoneycomb_grid_wm &lt;- honeycomb_grid_wm |&gt;\n  mutate(local_moran_fd)\n\nThe local values can now be mapped across the study area as shown below.\n\n#Map Local Moran's I\ntm_shape(honeycomb_grid_wm) +\n  tm_polygons(col = \"LMI_Ii\",\n              style = \"pretty\",\n              midpoint = 0,\n              title = \"Local Moran's I statistic\") +\n  tm_layout(main.title = \"Local Moran's I statistic\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\"))\n\n\n\n\n\n\n\n\nThis is not a very presentable nor easy to interpret map, so it can be refined. Significance breaks can be set to identify which areas have the most significant Moran’s I values. Additionally, a colour palette can be set to identify these significant hexagons on the map as shown below.\n\n#Set significance breaks\nbreaks &lt;- c(0, 0.05, 0.1, 1)\n\n#Set colour palette\ncolours &lt;- c(\"#ffffff\", \"#ff9480\", \"#ff2800\")\n\n#Map Local Moran's I with the significant points coloured\ntm_shape(honeycomb_grid_wm) +\n  tm_polygons(col = \"LMI_sigP\",\n              style = \"fixed\",\n              breaks = breaks,\n              palette = rev(colours),\n              title = \"p-value of Local Moran's I statistic\") +\n  tm_layout(main.title = \"Local Moran's I Significant clusters\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\"))\n\n\n\n\n\n\n\n\nThis map confirms the result from the Global test, where there does not appear to be much spatial autocorrelation in the data, but this map identifies that Central Birmingham and North Solihull have significant clusters of crime data. This map can be further refined as outlined below.\nUsing both Moran’s I values and statistical significance for each hexagon, a Local Indicators of Spatial Autocorrelation (LISA) map can be created, as outlined by Anselin (1995) here https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1538-4632.1995.tb00338.x. The map creates 4 quadrants, which identify different types of spatial autocorrelation. Low-low identifies areas with low values surrounded by low values of crime and high-high identifies areas with high values surrounded by high values of crime. High-low identifies areas with a high value surrounded by areas with low values, and Low-high identifies areas with a low value surrounded by areas with high values, essentially identifying hexagons which are outliers.\nTo create this map, significance breaks and a significance level need to be set. In this study, the significance level is set to 0.1.\n\n#Set Significance breaks\nhoneycomb_grid_wm &lt;- honeycomb_grid_wm |&gt;\n  mutate(obs_diff = (weaponcrime_rate - mean(honeycomb_grid_wm$weaponcrime_rate)))\n\n#Compare local Local Moran's I value with mean value\nhoneycomb_grid_wm &lt;- honeycomb_grid_wm |&gt;\n  mutate(LMI_diff = (honeycomb_grid_wm$LMI_Ii - mean(honeycomb_grid_wm$LMI_Ii)))\n\n#Set significance threshold\nsignif &lt;- 0.1\n\nThe four different types of clusters can then be identified, and colour palette can be selected for the map which will be produced.\n\n#Set the four types of clusters that can be present\nhoneycomb_grid_wm &lt;- honeycomb_grid_wm |&gt;\n  mutate(cluster_type = case_when(\n    obs_diff &gt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"High-High\",\n    obs_diff &lt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"Low-Low\",\n    obs_diff &lt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"Low-High\",\n    obs_diff &gt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"High-Low\",\n    LMI_sigP &gt; signif ~ \"No Significance\"))\n\n#Count cluster types\ncount(honeycomb_grid_wm, cluster_type)\n\nSimple feature collection with 4 features and 2 fields\nGeometry type: GEOMETRY\nDimension:     XY\nBounding box:  xmin: 386901.5 ymin: 272505.1 xmax: 438651.5 ymax: 307223.1\nProjected CRS: OSGB36 / British National Grid\n     cluster_type    n            area_honeycomb_grid\n1       High-High   20 MULTIPOLYGON (((406901.5 28...\n2        High-Low    6 MULTIPOLYGON (((407401.5 28...\n3         Low-Low   34 POLYGON ((416901.5 282897.4...\n4 No Significance 4382 POLYGON ((388419.3 282643.3...\n\n#Create colour palette\npal &lt;- c(\"#ff2800\", \"#ff9480\", \"#133a7c\", \"#ffffff\")\n\nThe LISA map can now be produced, as shown in this code chunk.\n\n#Plot the different clusters as a LISA map\ntm_shape(honeycomb_grid_wm) +\n  tm_polygons(col = \"cluster_type\",\n              palette = pal,\n              title = \"Cluster Type\") +\n  tm_borders(lwd=0.1, \n             col = 'Lightgrey', \n             alpha = 0.1) +\n  tm_shape(LA_WestMidlands) +\n  tm_borders(lwd=2, \n             col = 'Black', \n             alpha = 1) +\n  tm_layout(main.title = \"LISA map of weapon crime rate in West Midlands County\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: West Midlands Police, ONS, WorldPop',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThis map shows that there is a high-high cluster of weapon crime rates in Central Birmingham, with some high-low clusters towards the edge of the centre. Additionally, North Solihull is mostly a low-low cluster of weapon crime rates, but there are particular hexagons in the area which identify high weapon crime rates.\nA different measure of spatial autocorrelation can also be conducted. The Getis Ord Gi* statistic can be calculated for each hexagon and a hot/cold spot map can be produced across the study area. This method was proposed by Getis and Ord (1992) here https://onlinelibrary.wiley.com/doi/10.1111/j.1538-4632.1992.tb00261.x. The method compares local values to the global sum, considering spatial relationships between neighbours; and the method incorporates the spatial weights matrix and computes z-scores to determine significance. Using z-scores, adjusting for significance, hotspots and cold spots can be determined where higher z-scores indicate hotspots and lower z-scores indicate cold spots.\nUsing the defined fixed distance neighbours, the Gi* test can be conducted, and this data can be joined to the hexagon data frame.\n\n#Gi* test\ngi_fd &lt;- honeycomb_grid_wm |&gt;\n  pull(weaponcrime_rate) |&gt;\n  as.vector() |&gt;\n  localG(hex_spatial_weights_fd)\n\n#Join data together\nhoneycomb_grid_wm &lt;- honeycomb_grid_wm |&gt;\n  mutate(weaponcrime_gi = as.numeric(gi_fd))\n\n#Inspect dataset\nhoneycomb_grid_wm\n\nSimple feature collection with 4442 features and 20 fields\nGeometry type: GEOMETRY\nDimension:     XY\nBounding box:  xmin: 386901.5 ymin: 272505.1 xmax: 438651.5 ymax: 307223.1\nProjected CRS: OSGB36 / British National Grid\nFirst 10 features:\n   grid_id weapon_possession  mcty18cd      mcty18nm  bng_e  bng_n     long\n19      19                 0 E11000005 West Midlands 402507 289715 -1.96448\n20      20                 0 E11000005 West Midlands 402507 289715 -1.96448\n29      29                 0 E11000005 West Midlands 402507 289715 -1.96448\n30      30                 0 E11000005 West Midlands 402507 289715 -1.96448\n31      31                 0 E11000005 West Midlands 402507 289715 -1.96448\n32      32                 3 E11000005 West Midlands 402507 289715 -1.96448\n33      33                 0 E11000005 West Midlands 402507 289715 -1.96448\n59      59                 0 E11000005 West Midlands 402507 289715 -1.96448\n60      60                 0 E11000005 West Midlands 402507 289715 -1.96448\n61      61                 0 E11000005 West Midlands 402507 289715 -1.96448\n        lat                               GlobalID\n19 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n20 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n29 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n30 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n31 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n32 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n33 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n59 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n60 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n61 52.50534 {B9BFCE10-F6A8-4506-B279-E46B2DD9C1BB}\n              area_honeycomb_grid population2020 weaponcrime_rate       LMI_Ii\n19 POLYGON ((387401.5 288670.9...       571.1822         0.000000  0.005365600\n20 MULTIPOLYGON (((387401.5 28...      1161.1639         0.000000  0.005542948\n29 MULTIPOLYGON (((387151.5 29...      1415.0453         0.000000  0.002867228\n30 POLYGON ((386901.5 298197.1...      1411.6709         0.000000  0.004524124\n31 POLYGON ((387014.3 298998.1...      1476.7990         0.000000  0.002928387\n32 POLYGON ((387401.5 300217.9...      1479.6732         2.027475 -0.005078336\n33 POLYGON ((386973 300753.9, ...       862.3975         0.000000  0.003950010\n59 POLYGON ((387401.5 288670.9...       571.1822         0.000000  0.005559493\n60 POLYGON ((387401.5 289536.9...      1402.2463         0.000000  0.004430653\n61 POLYGON ((387350.1 289855.3...       920.0815         0.000000  0.005165597\n         LMI_eIi    LMI_varIi    LMI_zIi  LMI_sigP   obs_diff    LMI_diff\n19 -1.622965e-06 0.0004225424  0.2611046 0.7940119 -0.9903441 -0.03407905\n20 -1.622965e-06 0.0004790979  0.2533120 0.8000271 -0.9903441 -0.03390170\n29 -1.622965e-06 0.0004490528  0.1353815 0.8923103 -0.9903441 -0.03657743\n30 -1.622965e-06 0.0004225424  0.2201685 0.8257400 -0.9903441 -0.03492053\n31 -1.622965e-06 0.0003989776  0.1466881 0.8833782 -0.9903441 -0.03651627\n32 -1.779934e-06 0.0004375655 -0.2426876 0.8082474  1.0371306 -0.04452299\n33 -1.622965e-06 0.0005530550  0.1680322 0.8665580 -0.9903441 -0.03549464\n59 -1.622965e-06 0.0003778933  0.2860733 0.7748220 -0.9903441 -0.03388516\n60 -1.622965e-06 0.0003778933  0.2280038 0.8196433 -0.9903441 -0.03501400\n61 -1.622965e-06 0.0004490528  0.2438419 0.8073533 -0.9903441 -0.03427906\n      cluster_type weaponcrime_gi\n19 No Significance     -0.2611046\n20 No Significance     -0.2533120\n29 No Significance     -0.1353815\n30 No Significance     -0.2201685\n31 No Significance     -0.1466881\n32 No Significance     -0.2426876\n33 No Significance     -0.1680322\n59 No Significance     -0.2860733\n60 No Significance     -0.2280038\n61 No Significance     -0.2438419\n\n\nUsing the data above, and selecting an appropriate colour palette, the hot/cold spot map can be created as shown below.\n\n#Set colour palette\npal2 &lt;- c(\"#81c4ff\", \"#ff9480\", \"#ff3e1a\", \"#ff2800\", \"#b31c00\")\n\n#Plot the different clusters\ntm_shape(honeycomb_grid_wm) +\n  tm_polygons(col = \"weaponcrime_gi\",\n              style = \"pretty\",\n              midpoint = 0,\n              title = \"Local Gi* statistic\",\n              palette = pal2) +\n  tm_borders(lwd=0.1, \n             col = 'Lightgrey', \n             alpha = 0.1) +\n  tm_shape(LA_WestMidlands) +\n  tm_borders(lwd=2, \n             col = 'Black', \n             alpha = 1) +\n  tm_layout(main.title = \"Hot/Coldspot map of weapon crime rates in West Midlands County\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: West Midlands Police, ONS, WorldPop',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThis map suggests that the highest weapon crime rates are found in North Solihull, and to a lesser degree in the central areas of all other local authorities. Most areas outside the city centres have dispersed weapon crime rates.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#geographically-weighted-regression",
    "href": "social_atlas_weapons.html#geographically-weighted-regression",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Geographically Weighted Regression",
    "text": "Geographically Weighted Regression\nTo test the relationship between weapon crime rates and another variable of interest, a geographically weighted regression (GWR) can be performed. This is better than a linear regression model, as GWR accounts for spatial weights within each spatial unit. The comparison variable of interest for this study is the Index of Multiple Deprivation (IMD), as this consists of many variables in its creation, including income and health statistics, and there could potentially be a link between high levels of deprivation and high crime rates.\n\n#Create detailed map to show IMD in the West Midlands\ntm_shape(WestMidlands_WeaponPossession) +\n  tm_fill(col = \"SOA_decile\",\n          style = \"fixed\",\n          palette = \"RdYlBu\",\n          n = 10,\n          #Breaks are chosen fixed with these intervals as IMD goes in this scale\n          breaks = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10), \n          title = \"IMD Decile Scores\",\n          labels = c('Worst Performing', '9th', '8th', '7th', '6th', '5th', '4th', '3rd', '2nd', 'Best Performing')) +\n  tm_borders(lwd=0.1, \n             col = 'Lightgrey', \n             alpha = 0.1) +\n  tm_shape(LA_WestMidlands) +\n  tm_borders(lwd=2, \n             col = 'Black', \n             alpha = 1) +\n  tm_layout(main.title = \"IMD decile scores for West Midlands County - 2019\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, CRDC',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThe map shows that the centres of Birmingham, Sandwell and Coventry have high deprivation scores, and most of Solihull and the edges of most authorities have low deprivation scores.\nA MAJOR NOTE FOR GWR: Since the IMD is calculated by LSOA, this cannot be aggregated to the hexagons formed in previous maps. Fortunately at the start of this report, weapon crime rates per 1000 people were calculated by LSOA, using 2021 population data from the census, so this will be used for this section.\nBefore conducting the GWR, a standard regression model is created to see what the initial correlation between weapon possession crime rates and the IMD.\n\nlinearmodel &lt;- lm(WestMidlands_WeaponPossession$weapon_rate ~ WestMidlands_WeaponPossession$SOA_pct)\nsummary(linearmodel)\n\n\nCall:\nlm(formula = WestMidlands_WeaponPossession$weapon_rate ~ WestMidlands_WeaponPossession$SOA_pct)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-32.64 -13.60  -4.67   4.77 864.05 \n\nCoefficients:\n                                      Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)                            32.6386     1.2192   26.77   &lt;2e-16 ***\nWestMidlands_WeaponPossession$SOA_pct  -0.3335     0.0287  -11.62   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 33.4 on 1717 degrees of freedom\nMultiple R-squared:  0.07289,   Adjusted R-squared:  0.07235 \nF-statistic:   135 on 1 and 1717 DF,  p-value: &lt; 2.2e-16\n\n#Multiple R-squared = 0.07289\n\nWhile p-values are significant for this model, the relatively low multiple R-squared value of 0.07289 indicates that 7.29% of variance is explained by model. This model can be much improved through GWR.\nTo work with the ‘spgwr’ package, the spatial object needs to be reformatted.\n\n#The WestMidlands_WeaponPossession object reformatted to a different type of spatial object\nWestMidlands_WeaponPossession.SP&lt;- as(WestMidlands_WeaponPossession, \"Spatial\")\n\nThe GWR calculates local coefficients for each LSOA, using adaptive kernel bandwidths to provide stronger results by accounting for the varying data density in each LSOA.\n\n#Calculate kernel bandwidth, adaptive\nGWRbandwidth &lt;- gwr.sel(WestMidlands_WeaponPossession.SP$weapon_rate ~ \n                          WestMidlands_WeaponPossession.SP$SOA_pct, \n                        data=WestMidlands_WeaponPossession.SP,\n                        adapt=T)\n\nAdaptive q: 0.381966 CV score: 1914148 \nAdaptive q: 0.618034 CV score: 1916280 \nAdaptive q: 0.236068 CV score: 1912300 \nAdaptive q: 0.145898 CV score: 1909062 \nAdaptive q: 0.09016994 CV score: 1898780 \nAdaptive q: 0.05572809 CV score: 1878710 \nAdaptive q: 0.03444185 CV score: 1850443 \nAdaptive q: 0.02128624 CV score: 1821956 \nAdaptive q: 0.01315562 CV score: 1801766 \nAdaptive q: 0.008130619 CV score: 1786028 \nAdaptive q: 0.005024999 CV score: 1770742 \nAdaptive q: 0.00310562 CV score: 1748312 \nAdaptive q: 0.001919379 CV score: 1753795 \nAdaptive q: 0.002952573 CV score: 1746818 \nAdaptive q: 0.002678447 CV score: 1745033 \nAdaptive q: 0.002388508 CV score: 1743831 \nAdaptive q: 0.002038421 CV score: 1749587 \nAdaptive q: 0.002254787 CV score: 1744347 \nAdaptive q: 0.002429199 CV score: 1743949 \nAdaptive q: 0.002347818 CV score: 1743734 \nAdaptive q: 0.002307128 CV score: 1743823 \nAdaptive q: 0.002347818 CV score: 1743734 \n\n\nAfter performing this, the GWR model can be created and the results can be viewed.\n\n#Run GWR model and view the results after\ngwr.model = gwr(WestMidlands_WeaponPossession.SP$weapon_rate ~ \n                  WestMidlands_WeaponPossession.SP$SOA_pct, \n                data = WestMidlands_WeaponPossession.SP, \n                adapt=GWRbandwidth, \n                hatmatrix=TRUE, \n                se.fit=TRUE) \ngwr.model\n\nCall:\ngwr(formula = WestMidlands_WeaponPossession.SP$weapon_rate ~ \n    WestMidlands_WeaponPossession.SP$SOA_pct, data = WestMidlands_WeaponPossession.SP, \n    adapt = GWRbandwidth, hatmatrix = TRUE, se.fit = TRUE)\nKernel function: gwr.Gauss \nAdaptive quantile: 0.002347818 (about 4 of 1719 data points)\nSummary of GWR coefficient estimates at data points:\n                                              Min.   1st Qu.    Median\nX.Intercept.                               4.30059  22.39361  27.49778\nWestMidlands_WeaponPossession.SP.SOA_pct  -3.77940  -0.45674  -0.27150\n                                           3rd Qu.      Max.  Global\nX.Intercept.                              36.03627 150.47974 32.6386\nWestMidlands_WeaponPossession.SP.SOA_pct  -0.14813   5.31077 -0.3335\nNumber of data points: 1719 \nEffective number of parameters (residual: 2traceS - traceS'S): 457.122 \nEffective degrees of freedom (residual: 2traceS - traceS'S): 1261.878 \nSigma (residual: 2traceS - traceS'S): 32.2659 \nEffective number of parameters (model: traceS): 322.8728 \nEffective degrees of freedom (model: traceS): 1396.127 \nSigma (model: traceS): 30.67539 \nSigma (ML): 27.64487 \nAICc (GWR p. 61, eq 2.33; p. 96, eq. 4.21): 17089.24 \nAIC (GWR p. 96, eq. 4.22): 16613.42 \nResidual sum of squares: 1313727 \nQuasi-global R2: 0.3642764 \n\n#Quasi-global R-squared = 0.364\n\nWe can see here that the model performs much better than the linear model as the Quasi-global R2 is 0.3642764, much higher than the linear regression model’s score of 0.07289. This indicates that 36.43% of variance is explained by model, which is still not high, but still shows that the GWR is an appropriate method.\nIn order to map these results, local coefficients and local R2 values need to be linked to the spatial data frame as shown below.\n\n#Use local R2 values from this model now and local coefficients\nresults &lt;-as.data.frame(gwr.model$SDF)\nnames(results)\n\n [1] \"sum.w\"                                          \n [2] \"X.Intercept.\"                                   \n [3] \"WestMidlands_WeaponPossession.SP.SOA_pct\"       \n [4] \"X.Intercept._se\"                                \n [5] \"WestMidlands_WeaponPossession.SP.SOA_pct_se\"    \n [6] \"gwr.e\"                                          \n [7] \"pred\"                                           \n [8] \"pred.se\"                                        \n [9] \"localR2\"                                        \n[10] \"X.Intercept._se_EDF\"                            \n[11] \"WestMidlands_WeaponPossession.SP.SOA_pct_se_EDF\"\n[12] \"pred.se.1\"                                      \n\ngwr.map &lt;- WestMidlands_WeaponPossession\ngwr.map &lt;- cbind(WestMidlands_WeaponPossession, as.matrix(results))\n\nThe local coefficients for the model can be mapped across West Midlands County, with an appropriate colour palette, and map elements as shown below. Initally a quick qtm map was made for this to see how the breaks are distributed. With this in mind I have selected appropriate class breaks as specified in breaksgwr. The variable \"WestMidlands_WeaponPossession.SP.SOA_pct\" represents the local GWR coefficients for each LSOA.\n\n#Create GWR coefficient map for IMD Rank\n#Set palette first\npal3 &lt;- c('#ff8000', '#ff9d3b', '#ffce9d', '#7cffc1' ,'#31a354', '#006837')\nbreaksgwr &lt;- c(-3.779, -1.000, -0.500, 0, 0.5000, 1.000, 5.311)\n\ntm_shape(gwr.map) + \n  tm_fill(\"WestMidlands_WeaponPossession.SP.SOA_pct\", \n          n = 6, \n          breaks = breaksgwr, \n          title = \"IMD Rank Coefficient\",\n          palette = pal3) + \n  tm_borders(lwd=0.2, \n             col = 'darkgrey', \n             alpha = 0.1) +\n  tm_shape(LA_WestMidlands) +\n  tm_borders(lwd=2, \n             col = 'Black', \n             alpha = 1) +\n  tm_layout(main.title = \"GWR Analysis: IMD vs Weapon Crime Rate in West Midlands County\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: West Midlands Police, ONS, Nomis, CRDC',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThe map displays the local coefficients for each LSOA. Orange coloured areas, such as most of Wolverhampton, central Coventry and Walsall have a negative correlation between the IMD and the weapon crime rate. Areas in the green colour, such as central Birmingham and north and south Solihull show a positive correlation between weapon crime rate and IMD scores. This result was expected as other studies have found a link between deprivation and knife crime.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#focus-on-birmingham",
    "href": "social_atlas_weapons.html#focus-on-birmingham",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Focus on Birmingham",
    "text": "Focus on Birmingham\nDue to the GWR results suggesting that there is a positive correlation between deprivation and the weapon possession rate, and that Birmingham is the largest city/local authority in the county, the area has been selected for further analysis of weapon crimes.\nAnother factor as suggested by academics which links to crime is unemployment, so the first part of the Birmingham analysis will map unemployment across each Ward in the authority, and provide locations of where weapon possession crimes took place.\nIt is important in this report to know the names of the wards being discussed across Birmingham as shown in this map. (Source: https://www.birmingham.gov.uk/wards).\n\n\n\n\n\n\n\n\n\nMore data preparation steps are required to conduct this as the scale of the maps is changing from the entirety of West Midlands County by LSOA to Birmingham by Ward. Additionally, unemployment and other associated variables need to be loaded into R.\nFirstly all the crimes in West Midlands County need to be filtered by weapon possession and transformed to the correct CRS, similar to the first set of data preparation in this report.\n\n#Filter all crimes by Possession of Weapons\ncrime_weapon_possession &lt;- all_crime_wm |&gt;\n  filter(`Crime type` == \"Possession of weapons\" & !is.na(Longitude) & !is.na(Latitude)) |&gt;\n  #Keep longitude/latitude columns\n  dplyr::select(Longitude, Latitude) |&gt;\n  #Transform into point spatial dataframe, set CRS to 4236\n  st_as_sf(coords = c(\"Longitude\", \"Latitude\"), crs = 4236) |&gt;\n  #Transform CRS into 27700 for BNG\n  st_transform(27700)\n\nThis set of spatial data points needs to be saved as a geopackage and loaded back into R.\n\n#Save the crime_weapon_possession spatial frame from the chunk above using st_write as \"WestMidlands_Weapons_2023.gpkg\"\n\n#Load weapon data geopackage in\nweapons_wm_2023 &lt;- st_read(\"WestMidlands_Weapons_2023.gpkg\")\n\nReading layer `WestMidlands_Weapons_2023' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\WestMidlands_Weapons_2023.gpkg' \n  using driver `GPKG'\nSimple feature collection with 6756 features and 0 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 387401.5 ymin: 272793.7 xmax: 438264.2 ymax: 306828.7\nProjected CRS: OSGB36 / British National Grid\n\n\nThis map is just a test to see whether all the crime points have been created correctly. It should look like this.\n\n#Test to see if all data has loaded correctly\n#Plot West Midlands LSOAs and Possession of Weapons points\ntm_shape(LSOA_WestMidlands) +\n  tm_fill() +\n  tm_shape(weapons_wm_2023) +\n  tm_dots(col = \"blue\")\n\n\n\n\n\n\n\n\nSince this section of the report only focuses on Birmingham, the spatial data frames need to be filtered to just include information on Birmingham as shown below.\n\n#Extract out the Birmingham Local Authority\nLA_Birmingham &lt;- LA_eng_2023[grepl('Birmingham', LA_eng_2023$LAD23NM), ]\n\n#Extract out the Birmingham LSOAs\nLSOA_Birmingham &lt;- LSOA_eng_2021[grepl('Birmingham', LSOA_eng_2021$LSOA21NM), ]\n\n#Extract all Birmingham data from the large main dataframe\nBirmingham_WeaponPossession &lt;- WestMidlands_WeaponPossession[grepl('Birmingham', WestMidlands_WeaponPossession$LSOA21NM), ]\n\nNext the ward spatial data for Birmingham needs to be loaded into R. After inspecting the dataset, it appears that rows 2752 to 2820 contain all the wards in Birmingham, so these are extracted and the shape is checked to see if there are any errors.\n\n#Load in Ward gpkg data\nWards_2023 &lt;- st_read(\"Wards_2023.gpkg\")\n\nReading layer `WD_DEC_2023_UK_BGC' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\Wards_2023.gpkg' \n  using driver `GPKG'\nSimple feature collection with 8441 features and 8 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -116.1928 ymin: 5352.6 xmax: 655653.8 ymax: 1220299\nProjected CRS: OSGB36 / British National Grid\n\n#Check crs\nst_crs(Wards_2023) #27700\n\nCoordinate Reference System:\n  User input: OSGB36 / British National Grid \n  wkt:\nPROJCRS[\"OSGB36 / British National Grid\",\n    BASEGEOGCRS[\"OSGB36\",\n        DATUM[\"Ordnance Survey of Great Britain 1936\",\n            ELLIPSOID[\"Airy 1830\",6377563.396,299.3249646,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4277]],\n    CONVERSION[\"British National Grid\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",49,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-2,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996012717,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",400000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",-100000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"United Kingdom (UK) - offshore to boundary of UKCS within 49°45'N to 61°N and 9°W to 2°E; onshore Great Britain (England, Wales and Scotland). Isle of Man onshore.\"],\n        BBOX[49.75,-9.01,61.01,2.01]],\n    ID[\"EPSG\",27700]]\n\n#Extract out all wards in Birmingham\nrows_to_extract &lt;- 2752:2820\nWards_Birmingham &lt;- Wards_2023[rows_to_extract, ]\n\n#Check the wards shape is correct\ntm_shape(Wards_Birmingham)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nIf the map produced looks like the one above, the data preparation steps have been conducted correctly.\nAll weapon crimes now need to be filtered to include those which took place in Birmingham. Previous steps which were conducted need to be taken place to sort the newly created all_crime_birmingham into a set of points which only contains data on weapon possession crimes.\n\n#Extract all crimes committed in Birmingham\nall_crime_birmingham &lt;- all_crime_wm[grepl('Birmingham', all_crime_wm$`LSOA name`), ]\n\n#Repeat lines to filter out weapon crimes\nbirmingham_crime_weapon_possession &lt;- all_crime_birmingham |&gt;\n  filter(`Crime type` == \"Possession of weapons\" & !is.na(Longitude) & !is.na(Latitude)) |&gt;\n  #Keep longitude/latitude columns\n  dplyr::select(Longitude, Latitude) |&gt;\n  #Transform into point spatial dataframe, set CRS to 4236\n  st_as_sf(coords = c(\"Longitude\", \"Latitude\"), crs = 4236) |&gt;\n  #Transform CRS into 27700 for BNG\n  st_transform(27700)\n\n#Save the birmingham_crime_weapon_possession spatial frame using st_write as \"Birmingham_Weapons_2023.gpkg\"\n\n#Load weapon data geopackage in\nweapons_birmingham_2023 &lt;- st_read(\"Birmingham_Weapons_2023.gpkg\")\n\nReading layer `Birmingham_Weapons_2023' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\Birmingham_Weapons_2023.gpkg' \n  using driver `GPKG'\nSimple feature collection with 3183 features and 0 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 397903.3 ymin: 276469.3 xmax: 416304 ymax: 300105.6\nProjected CRS: OSGB36 / British National Grid\n\n\nAgain, it is useful to check if these tasks have been performed correctly by producing a simple map as shown below.\n\n#Check the data works in a map\ntm_shape(LSOA_Birmingham) +\n  tm_fill() +\n  tm_shape(weapons_birmingham_2023) +\n  tm_dots(col = \"blue\")\n\n\n\n\n\n\n\n\nThis is a correct map which shows all the weapon possession crimes across Birmingham.\nThe hexagon map that was previously created for the entirety of West Midlands County can be reproduced for Birmingham. The entire spatial query can be re conducted, with a different hexagon size, but as this is just a demonstration of how what the map would look like, it is kept at the same hexagon size of 500 metres. The only adjustment made in the map design is the breaks have been changed to fit the crime rates for Birmingham, where values range from 0 to 28 instead of 0 to 631.\n\n#Clip data to fit Birmingham\nhoneycomb_grid_birmingham &lt;- honeycomb_grid_wm |&gt;\n  st_intersection(LA_Birmingham)\n#Create detailed map to show the number of weapons crimes in Birmingham\ntm_shape(LA_Birmingham) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_shape(honeycomb_grid_birmingham) +\n  tm_fill(col = \"weaponcrime_rate\",\n          palette = c(\"#009900\", \"#ffff00\", \"#ffcc00\", \"#ffa600\", \"#ff7300\", \"#ff4d00\", \"#ff2600\", \"#ff0000\"),\n          style = \"fixed\",\n          n=8,\n          breaks = c(0,0.1,0.5,1,1.5,2,5,10,28),\n          title = \"Weapon Possession Crime Rate per 1000 people\",\n          id = \"grid_id\",\n          showNA = FALSE,\n          alpha = 0.6,\n          popup.vars = c(\"Weapon Possession Crime Rate per 1000 people: \" = \"weaponcrime_rate\"),\n          popup.format = list(weaponcrime_rate = list(format = \"f\", digits = 0))) +\n  tm_borders(col = \"grey40\", \n             lwd = 0.7) +\n  tm_layout(main.title = \"Weapon Possession Crime Rate in Birmingham - 2023\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.position = c(\"left\", \"top\"),\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0,2.5,5,7.5,10),\n               position = c(\"left\", \"top\")) +\n  tm_credits(\"Data Source: ONS, West Midlands Police, WorldPop\",\n             position = c('right', 'bottom'),\n             fontface = 'italic', \n             size = 0.5)\n\n\n\n\n\n\n\n\nThis is effectively a zoomed in version of the original hexagon map, clearly showing that central Birmingham and west Birmingham seem to have the highest crime rates, with north Birmingham seeing a small number of weapon crimes occurring, indicated by the large number of green hexagons.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#unemployment-and-weapon-crime-in-birmingham",
    "href": "social_atlas_weapons.html#unemployment-and-weapon-crime-in-birmingham",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Unemployment and Weapon Crime in Birmingham",
    "text": "Unemployment and Weapon Crime in Birmingham\nAs stated at the start of the previous section, unemployment in Birmingham will be studied alongside weapon possession.\nIn order to conduct this, the unemployment data by ward from the 2021 census (downloaded from NOMIS) needs to be loaded and configured in R. The dataset needs to be re coded to create a variable showing the percentage of people who have never worked in each ward. This could be combined with those who said they had not worked in the last 12 months, HOWEVER the 2021 census took place just after the 2020 COVID-19 lockdown, where many people were out of work in that period, so just using ‘unemployment: never worked’ will be the most reliable data. Additionally, these people are most likely to have stayed unemployed instead of starting work like the 12 month category.\n\n#Load dataset which contains unemployment data \nunemployment_input &lt;- read.csv(\"ts065/census2021-ts065-ward.csv\")\n#Recode dataset to create a variable showing % of people who have never worked in each ward\nunemployment &lt;- data.frame(ward_code=unemployment_input$geography.code,\n                           Unemployment_perc=(unemployment_input$Employment.history..Not.in.employment..Never.worked/unemployment_input$Employment.history..Total..All.usual.residents.aged.16.years.and.over.not.in.employment.the.week.before.the.census)*100)\n#Save dataset to workspace\nwrite.csv(unemployment, \"unemployment_data_ward.csv\", row.names=F)\n\nThe .csv file created with unemployment percentage of each ward needs to be merged to the large spatial data frame which contains the shapes of all of the wards in Birmingham.\n\n#Merge unemployment data to the main spatial file\nWard_Birmingham_Census&lt;- merge(Wards_Birmingham, unemployment, by.x=\"WD23CD\", by.y=\"ward_code\", all.x=T)\n#Replace all NAs with 0\nWard_Birmingham_Census[is.na(Ward_Birmingham_Census)] = 0\nView(Ward_Birmingham_Census)\n#All has merged correctly\n\nBy viewing the dataset, it is easy to determine whether the columns have merged correctly. In each dataset there is a column for the ward code identifier, so it is specified in R that these two columns are the merging point of the two datasets.\nWith these preparation tasks being completed, a map can be produced to show unemployment percentages across Birmingham, with a layer of dots on the map to indicate where weapon possession crimes took place in 2023, as shown below. Breaks have been appropriately set by viewing the distribution of unemployment data\n\n#Choropleth map of weapon crime dots and unemployment percentage across wards\ntm_shape(Ward_Birmingham_Census) +\n  tm_fill(col = \"Unemployment_perc\",\n          style = \"fixed\",\n          palette = c(\"#dadaeb\", \"#bcbddc\", \"#9e9ac8\", \"#807dba\", \"#6a51a3\", \"#4a1486\"),\n          n = 6,\n          breaks = c(17, 29, 33, 36, 43, 54, 67),\n          title = \"% of Unemployed residents in Ward\") +\n  tm_borders(lwd=0.4, \n             col = 'black', \n             alpha = 0.8) +\n  tm_shape(LA_Birmingham) +\n  tm_borders(lwd=2, \n             col = 'black', \n             alpha = 1) +\n  tm_shape(weapons_birmingham_2023)+\n  tm_dots(col = 'red',\n          size = 0.05) +\n  tm_layout(main.title = \"% of Unemployed Residents and Weapon Crimes in Birmingham\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE, \n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 2.5, 5, 7.5, 10),\n               position = c(\"left\", \"top\")) +\n  tm_credits('Data source: West Midlands Police, ONS, Nomis',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nRed dots indicate each weapon possession crime which took place in 2023. The map clearly shows that the areas with low unemployment rates have a low number of weapon crimes, including all the wards in Sutton Coldfield, and the ward of Bourneville & Cotteridge. There are many areas with high unemployment and a high number of crimes closer to the city centre, including the wards of Handsworth and Small Heath.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#point-pattern-analysis",
    "href": "social_atlas_weapons.html#point-pattern-analysis",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Point Pattern Analysis",
    "text": "Point Pattern Analysis\nPoint Pattern Analysis techniques, such as Kernel Density Estimation (KDE) can help to view whether weapon crimes are concentrated in certain areas of Birmingham statistically. KDE presents a heat map displaying the distribution between central areas (kernels) and their neighbouring regions. This is a useful technique to understand the clustering and concentration of weapon crimes using point data not aggregated to spatial units.\nThe spatial data needs to be converted to a ppp format from a sf (simple features) format, using the ‘spatstat’ package to conduct the KDE.\n\n#Sf to ppp\nwindow = as.owin(LA_Birmingham)\nbirmingham_weapon_crime_ppp &lt;- ppp(st_coordinates(weapons_birmingham_2023)[, 1], \n                      st_coordinates(weapons_birmingham_2023)[,2], \n                      window = window)\n\nWarning: 29 points were rejected as lying outside the specified window\n\n\nWarning: data contain duplicated points\n\n\nIt is a good idea to inspect this ppp dataset.\n\n#Inspect\nplot(birmingham_weapon_crime_ppp)\n\nWarning in plot.ppp(birmingham_weapon_crime_ppp): 29 illegal points also\nplotted\n\n\n\n\n\n\n\n\n\nThe warning suggests that there are duplicated points in the data, where weapon possession crimes have occurred in the same place. To fix this, an offset can be added to the points to remove any duplication issues.\n\n#Check for duplicates\nanyDuplicated(birmingham_weapon_crime_ppp)\n\n[1] TRUE\n\n#Count number of duplicated points\nsum(multiplicity(birmingham_weapon_crime_ppp) &gt; 1)\n\n[1] 1935\n\n#Add offset to points\nbirmingham_weapon_crime_ppp_jitter &lt;- rjitter(birmingham_weapon_crime_ppp, \n                                 radius = 5, \n                                 retry = TRUE, \n                                 nsim = 1,\n                                 drop = TRUE)\n\n#Check for duplicates\nanyDuplicated(birmingham_weapon_crime_ppp_jitter)\n\n[1] FALSE\n\n\nBy doing this all duplication warnings have been resolved.\nEach crime point needs to be fitted to a Gaussian kernel bandwidth. The Gaussian method is the most commonly used, but there are other types of bandwidths available. A sigma value needs to be determined for each crime point kernel to determine the radius of the bandwidth, helping to define which points can be placed in the clusters. The value chosen for this study is 800 metres. This value was selected to ensure a sufficiently smooth density distribution was created and that no key features in the data were distorted.\n\n#Clip by Birmingham outline to raster\n#800m sigma value\nkde_800g_raster &lt;- density.ppp(birmingham_weapon_crime_ppp_jitter, sigma = 800) |&gt;\n  rast()\n\n#Add CRS\ncrs(kde_800g_raster) &lt;- \"epsg:27700\"\n\n#Check CRS\nst_crs(kde_800g_raster)\n\nCoordinate Reference System:\n  User input: OSGB36 / British National Grid \n  wkt:\nPROJCRS[\"OSGB36 / British National Grid\",\n    BASEGEOGCRS[\"OSGB36\",\n        DATUM[\"Ordnance Survey of Great Britain 1936\",\n            ELLIPSOID[\"Airy 1830\",6377563.396,299.3249646,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4277]],\n    CONVERSION[\"British National Grid\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",49,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-2,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996012717,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",400000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",-100000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"United Kingdom (UK) - offshore to boundary of UKCS within 49°45'N to 61°N and 9°W to 2°E; onshore Great Britain (England, Wales and Scotland). Isle of Man onshore.\"],\n        BBOX[49.75,-9.01,61.01,2.01]],\n    ID[\"EPSG\",27700]]\n\n\nThe KDE raster layer for weapon possession crimes can now be mapped as shown below. The palette is chosen appropriately from the ‘RColorBrewer’ package, and the style is chosen as 'cont' as this provides the most aesthetically pleasing map where the colour gradient changes smoother than a standard method.\n\n#Map kde raster\ntm_shape(kde_800g_raster) +\n  tm_raster(col = \"lyr.1\",\n    palette = 'YlOrRd', \n    style = 'cont',\n    title = \"KDE Layer\") +\n  tm_shape(Wards_Birmingham) +\n  tm_borders(lwd=0.5,\n             alpha=0.5,\n             col = 'black') +\n  tm_shape(LA_Birmingham) +\n  tm_borders(lwd=2,\n             alpha=1,\n             col = 'black') +\n  tm_layout(main.title = \"KDE Heatmap of weapon crimes in Birmingham\",\n            main.title.fontface = 2,\n            fontfamily = \"Mukta\",\n            legend.outside = TRUE,\n            frame = FALSE, \n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 2.5, 5, 7.5, 10),\n               position = c(\"left\", \"top\")) +\n  tm_credits('Data source: West Midlands Police, ONS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThere is a clear high-density area in the city centre, with this area spreading out across most of the wards in Central Birmingham. In contrast, Sutton Coldfield and wards in the south have low KDE values, indicating crimes are not clustered in these areas.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#link-to-train-stations",
    "href": "social_atlas_weapons.html#link-to-train-stations",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Link to train stations",
    "text": "Link to train stations\nAs train stations are entry nodes for people unfamiliar to a city to enter, crime can concentrate in these locations, so crimes taking place within a certain proximity of train stations in Central Birmingham can be mapped.\nUsing the KDE analysis from the previous section, wards which lie in Central Birmingham have been selected for this map and its analysis, as most crimes tend to concentrate here.\nFirstly all wards in the central cluster area need to be extracted from the Ward_Birmingham_Census spatial data frame. By viewing this dataset, the names of the wards in the centre and what rows they are in the dataset can be selected for extraction.\n\n#Extract out wards in the central cluster area\nrows_to_extract_2 &lt;- c(3,4,5,8,9,10,14,20,21,25,26,28,30,34,36,38,39,40,50,51,52,53,54,65,66,68,69)\nWard_Central_Birmingham_Census &lt;- Ward_Birmingham_Census[rows_to_extract_2, ]\n\nAgain, it is a good idea to check if this has been performed correctly.\n\n#Quick check of shape\ntm_shape(Ward_Central_Birmingham_Census)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nIf the shape looks like this, the extraction has been performed correctly.\nThe outline of Central Birmingham needs to be specified for the Overpass API to extract train stations in the area from OpenStreetMap.\n\n#Union of data\ncentral_birmingham_outline &lt;- Ward_Central_Birmingham_Census |&gt;\n  st_union()\nplot(central_birmingham_outline)\n\n\n\n\n\n\n\n\nIn order to extract the railway station points in this area, the latitude, longitude and bounding box of the outline need to be extracted for the Overpass API to extract the station data from OpenStreetMap.\n\n#Extract latitude, longitude bounding box from central Birmingham outline\np_bbox &lt;- st_bbox(st_transform(central_birmingham_outline, 4326))\n\nNext, a function in the Overpass API needs to be created which is able to extract stations from OpenStreetMap in the defined area.\n\n#Call OverPassQuery function\nstations_central_birmingham_osm &lt;- opq(bbox = p_bbox) |&gt;\n  #Add key and values to sf\n  add_osm_feature(key = \"public_transport\", value = \"station\") |&gt;\n  osmdata_sf()\n\nNow the railway station points can be extracted. Steps such as clipping the data to the outline of central Birmingham, and selecting relevant attributes of each station, such as the name, needs to be conducted here as well.\n\n#Extract only points\nstations_central_birmingham_osm &lt;- stations_central_birmingham_osm$osm_points |&gt;\n  #Add projection information\n  st_set_crs(4326) |&gt;\n  #Reproject to BNG\n  st_transform(27700) |&gt;\n  #Clip to central Birmingham outline\n  st_intersection(central_birmingham_outline) |&gt;\n  #Select relevant attributes\n  dplyr::select(c(\"osm_id\", \"name\", \"network\", \"operator\", \"public_transport\", \"railway\"))\n\nWarning: attribute variables are assumed to be spatially constant throughout\nall geometries\n\n\nThese points can now be inspected to see which stations from OSM have been extracted, and if any modifications need to be made.\n\n#Inspect these points\nplot(stations_central_birmingham_osm)\n\n\n\n\n\n\n\n\nThis study is only concerned with railways stations not all public transport nodes, so these are extracted from this data frame.\n\n#Extract train stations\nstations_central_birmingham_osm &lt;- stations_central_birmingham_osm |&gt;\n  filter(railway == \"station\")\n\nNow these stations can be mapped across Central Birmingham to see if all steps have been conducted correctly, and to visualise the distribution of stations.\n\n#Add Central Birmingham outline\ntm_shape(Ward_Central_Birmingham_Census) +\n  tm_fill() +\n  tm_borders() +\n  #Add station data\n  tm_shape(stations_central_birmingham_osm) +\n  tm_dots(col = \"black\",\n          size = 0.1) +\n  #Add other map info\n  tm_compass(type = \"arrow\",\n    position = c(\"right\", \"top\")) +\n  tm_scale_bar(breaks = c(0, 1, 2, 3, 4, 5),\n    position = c(\"left\", \"bottom\")) +\n  tm_credits(\"© OpenStreetMap contributors, ONS\")\n\n\n\n\n\n\n\n\nNow the proximity calculation of the number of weapon crimes occurring within a fixed distance of each station can be conducted. Firstly a single geometry needs to be created for the data.\n\n#Create a single geometry\nstations_central_birmingham_osm_compare &lt;- stations_central_birmingham_osm |&gt;\n  st_union()\n\nFor this study, a 500 metre buffer will be created around each station to count the number of crimes occurring in this radius. 500 metres is chosen as this is a small enough zone around each station where people may immediately travel around upon entering Birmingham.\n\n#Generate a 500m buffer\nstation_500m_buffer &lt;- stations_central_birmingham_osm |&gt;\n  st_buffer(dist = 500)\n\nThis buffer can now be used to count the number of weapon possession crime points which fall within the buffer region.\n\n#Intersect buffers with weapon possession crimes and work out number of crimes in each buffer\nstation_500m_buffer$`Total Count` &lt;- lengths(st_intersects(station_500m_buffer, weapons_birmingham_2023))\n\nNow a final map can be produced which shows the number of weapon crimes occurring within 500 metres of each railway station in Central Birmingham. This map uses proportionally sized dots using the 'tm_bubbles' function to indicate how many crimes occur around each station. Additionally, these dots are overlayed on a map of unemployment rates across Central Birmingham.\n\ntm_shape(Ward_Central_Birmingham_Census)+\n  tm_borders(lwd = 0.5,\n             col = 'black',\n             alpha = 1)+\n  tm_fill(col = \"Unemployment_perc\",\n          style = \"fixed\",\n          palette = c(\"#f4f9fd\", \"#9fccf0\", \"#5ba7e6\", \"#2182d2\", \"#16588e\", \"#0b2e4a\"),\n          n = 6,\n          breaks = c(0, 30, 34, 36, 43, 54, 67),\n          title = \"% of unemployed residents in Ward\") +\ntm_shape(station_500m_buffer) +\n  tm_bubbles(size = \"Total Count\", \n             col = \"red\", \n             n=8, \n             style = \"quantile\", \n             legend.size.show=TRUE, \n             title.col = \"Count\", \n             border.col = \"black\", \n             border.lwd = 0.1, \n             border.alpha = 0.1)+\n  tm_layout(main.title = \"Number of Weapon Crimes within 500 metres of a railway station\",\n            main.title.fontface = 2,\n            fontfamily = \"Helvetica\",\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.position = c(\"left\", \"top\"),\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0,1,2,3,4,5),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits(\"© OpenStreetMap contributors, ONS, West Midlands Police\",\n             position = c('right', 'top'),\n             fontface = 'italic', \n             size = 0.5)\n\n\n\n\n\n\n\n\nAlthough there is theoretical evidence to suggest crimes cluster around stations, this is not the case for 13/16 of the stations having low weapon crime counts. However, three stations: Birmingham New Street, Birmingham Snow Hill, and Birmingham Moor Street, in the city centre have a cluster of weapon crimes occurring within a 500m radius. This makes sense as these are the three stations which connect Birmingham to other major cities in the UK, such as Manchester and London, being a node for people unfamiliar to Birmingham to enter the city.\nA major caveat to this is that weapon possession crimes are statistically more likely to occur in a city centre where large groups of people form, and that the large number of crimes by the central stations is a product of this.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#conclusions-and-final-remarks",
    "href": "social_atlas_weapons.html#conclusions-and-final-remarks",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "Conclusions and Final Remarks",
    "text": "Conclusions and Final Remarks\nIn conclusion, this social atlas shows that weapon possession crimes are unevenly distributed in West Midlands County, with clear clusters being identified. The report showed that in certain areas, (Central Birmingham & Solihull) using GWR, there is a positive correlation between the IMD and weapon crime. Additionally, there appears to be a link between unemployment and weapon crime, but it is less clear whether weapon crimes cluster around railway stations. The findings illustrate that there are many factors that link to weapon possession crimes, and that local councils, especially those in Birmingham need to provide strategies to prevent crimes from rising even further.\nIt is very important to note that this is not a conclusive study of every single factor which is linked to weapon possession crimes across the region, as for example, population density and household income, among many other factors, need to be accounted for when producing a wider study of the issue. Some of these variables may help to explain some of the trends found in this report, such as why crimes are concentrated in city centres.\nOverall, I hope this report provides an overview of weapon crime issues in West Midlands County, and also an overview of different geospatial techniques that can be conducted in RStudio on geospatial data, and large data sets with geographic elements present.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "social_atlas_weapons.html#references",
    "href": "social_atlas_weapons.html#references",
    "title": "A GIS study of weapon possession crimes in West Midlands County (2023)",
    "section": "References",
    "text": "References\nAllen, G., H. Carthew and Y. Zayed (2023) ‘Knife crime statistics England and Wales’, London: House of Commons, https://commonslibrary.parliament.uk/research-briefings/sn04304/.\nAnselin, L. (1995) ‘Local Indicators of Spatial Association—LISA’, Geographical Analysis, 27, 2, 93-115, https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1538-4632.1995.tb00338.x.\nBonnier, A., M. Finné and E. Weiberg (2019) ‘Examining land-use through GIS-Based kernel density estimation: a Re-Evaluation of legacy data from the berbati-limnes survey’, Journal of Field Archaeology, 44, 2, 70-83, https://www.tandfonline.com/doi/full/10.1080/00934690.2019.1570481.\nBrunsdon, C., A.S. Fotheringham and M.E. Charlton (1996) ‘Geographically Weighted Regression: A Method for Exploring Spatial Nonstationarity’, Geographical Analysis, 28, 4, 281-298, https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1538-4632.1996.tb00936.x.\nCarter, R.L. and K.Q. Hill (1976) ‘The Criminal’s Image of the City and Urban Crime Patterns’, Social Science Quarterly, 57, 3, 597-607, https://www.sciencedirect.com/book/9780080246338/the-criminals-image-of-the-city.\nCheshire, J.A. and P.A. Longley (2011) ‘Identifying spatial concentrations of surnames’, International Journal of Geographic Information Science, 26, 2, 309-325, https://www.tandfonline.com/doi/full/10.1080/13658816.2011.591291.\nChiu, S. (1991) ‘Bandwidth Selection for Kernel Density Estimation’, The Annals of Statistics, 19, 4, 1883-1905, https://www.jstor.org/stable/2241909.\nClement, M. (2010) ‘Teenagers under the knife: a decivilising process’, Journal of Youth Studies, 13, 4, 439-451, https://www.tandfonline.com/doi/full/10.1080/13676261003802406.\nGetis, A. and J.K. Ord (1992) ‘The Analysis of Spatial Association by Use of Distance Statistics’, Geographical Analysis, 24, 3, 189-206, https://onlinelibrary.wiley.com/doi/10.1111/j.1538-4632.1992.tb00261.x.\nGimond, M. (2023) Intro to GIS and spatial analysis, ‘Chapter 13: Spatial autocorrelation’, https://mgimond.github.io/Spatial/spatial-autocorrelation.html.\nHaylock, S., T. Boshari, E.C. Alexander, A. Kumar, L. Manikam and R. Pinder (2020) ‘Risk factors associated with knife-crime in United Kingdom among young people aged 10–24 years: a systematic review’, BMC Public Health, 20, 1451, 1-19, https://bmcpublichealth.biomedcentral.com/counter/pdf/10.1186/s12889-020-09498-4.pdf.\nIrvin-Erickson, Y. and N. La Vigne (2015) ‘A Spatio-temporal Analysis of Crime at Washington, DC Metro Rail: Stations’ Crime-generating and Crime-attracting Characteristics as Transportation Nodes and Places’, Crime Science, 4, 14, 1-13, https://crimesciencejournal.biomedcentral.com/articles/10.1186/s40163-015-0026-5.\nLee, S. (2019) ‘Uncertainty in the effects of the modifiable areal unit problem under different levels of spatial autocorrelation: a simulation study’, International Journal of Geographical Information Science, 33, 1, 1135-1154, https://www.tandfonline.com/doi/full/10.1080/13658816.2018.1542699.\nLivings, M. and A.M. Wu (2020) ‘Local Measures of Spatial Association’ The Geographic Information Science & Technology Body of Knowledge (3rd Quarter 2020 Edition), John P. Wilson (Ed.), https://gistbok-topics.ucgis.org/AM-03-023.\nLongley, P. et al. (2015) Geographic Information Science & Systems, ‘Chapter 4: Georeferencing’, pp. 77-98, https://app.knovel.com/kn/resources/kpGISSE001/toc?kpromoter=marc.\nLongley, P.A., J. van Dijk and T. Lan (2021) ‘The geography of intergenerational social mobility in Britain’, Nature Communications, 12, 6050, 1-8, https://www.nature.com/articles/s41467-021-26185-z.\nRawlinson (2024) ‘Idris Elba calls for immediate ban on machetes and ‘zombie’ knives’, London: The Guardian, https://www.theguardian.com/uk-news/2024/jan/08/idris-elba-calls-for-immediate-ban-on-machetes-and-zombie-knives?ref=upstract.com.\nRengert, G.F. and B. Lockwood (2009) ‘Geographical Units of Analysis and the Analysis of Crime’, in D. Weisburd, W. Bernasco, and G.J. Bruinsma (eds) Putting Crime in its Place, New York: Springer, 109-122, https://link.springer.com/chapter/10.1007/978-0-387-09688-9_5.\nShi, X. (2010) ‘Selection of bandwidth type and adjustment side in kernel density estimation over inhomogeneous backgrounds’, International Journal of Geographic Information Science, 24, 5, 643-660, https://www.tandfonline.com/doi/full/10.1080/13658810902950625.\nThapa, R.B. and R.C. Estoque (2012) ‘Geographically Weighted Regression in Geospatial Analysis’, in Y. Murayama (ed.) Progress in Geospatial Analysis, Tokyo: Springer, 85-96, https://link.springer.com/chapter/10.1007/978-4-431-54000-7_6.\nWest Midlands Police (2024) ‘Compare your area’, London: Police.UK, https://www.police.uk/pu/your-area/west-midlands-police/performance/compare-your-area/?tc=BW001.\nWong, D. (2009) ‘Modifiable Areal Unit Problem’, International Encyclopedia of Human Geography, 169-174, https://www.sciencedirect.com/science/article/abs/pii/B9780080449104004752.\nWong, K. (2021) ‘Create spatial square/hexagon grids and count points inside in R with sf’, Hong Kong: Urban Data Palette, https://urbandatapalette.com/post/2021-08-tessellation-sf/.\nZhang, H., R. Zahnow, Y. Liu and J. Corcoran (2022) ‘Crime at train stations: The role of passenger presence’, Applied Geography, 140, https://www.sciencedirect.com/science/article/abs/pii/S0143622822000376.\nZhao, J., H. Zhang and J.A. Zhang (2020) ‘Gaussian kernel adaptive filters with adaptive kernel bandwidth’, Signal Processing, 166, 107270, https://www.sciencedirect.com/science/article/abs/pii/S016516841930324X.",
    "crumbs": [
      "About",
      "A GIS study of weapon possession crimes in West Midlands County (2023)"
    ]
  },
  {
    "objectID": "map_presentation.html",
    "href": "map_presentation.html",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "",
    "text": "This is a tutorial of how to produce a well-designed map in RStudio using various elements from the ‘tmap’ package. This report uses data on bedroom data in London from the 2021 census, and shows the many different styles of maps that can be created through ‘tmap’, and how to add key elements to make maps more presentable.\nIf you would like to reference this report please use the following reference:\nMistri V. (2024) ‘Map Presentation and Styles in RStudio using tmap’, Vishal Mistri GIS Portfolio, https://vmistri91.github.io/Portfolio/map_presentation.html.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#introduction",
    "href": "map_presentation.html#introduction",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "",
    "text": "This is a tutorial of how to produce a well-designed map in RStudio using various elements from the ‘tmap’ package. This report uses data on bedroom data in London from the 2021 census, and shows the many different styles of maps that can be created through ‘tmap’, and how to add key elements to make maps more presentable.\nIf you would like to reference this report please use the following reference:\nMistri V. (2024) ‘Map Presentation and Styles in RStudio using tmap’, Vishal Mistri GIS Portfolio, https://vmistri91.github.io/Portfolio/map_presentation.html.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#data-sources",
    "href": "map_presentation.html#data-sources",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Data Sources",
    "text": "Data Sources\nAll spatial boundaries have been downloaded from the ONS Open Geography Portal https://geoportal.statistics.gov.uk/. Boundaries used include: 2021 Lower Super Output Area (LSOA) Boundaries UK and 2021 Local Authority (LA) Boundaries.\nTo obtain the 2021 census data on bedrooms in LSOAs, the Nomis website can be used https://www.nomisweb.co.uk/.\nAll of the files used in this report can be found in this Google Drive folder https://drive.google.com/drive/folders/1ajrcrN5nGg-0O-Jr-iQMxtTr20mB8G0N?usp=sharing.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#data-preparation",
    "href": "map_presentation.html#data-preparation",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Data Preparation",
    "text": "Data Preparation\nBefore creating the maps, the data needs to be loaded into R, cleaned and adjusted. The first step of this process is to load these necessary packages into RStudio. 'sf' allows R to perform geospatial operations with spatial data in the .gpkg format. 'tmap' is the main package used to create maps. 'ggplot2' is a useful package for making advanced graphs. 'RColorBrewer' is a package with preloaded colour palettes that can be used when making maps.\n\n#Load relevant packages\nlibrary(sf)\nlibrary(tmap)\nlibrary(ggplot2)\nlibrary(RColorBrewer)\n\nNext the .gpkg spatial file which contains information on the shape and properties of all Lower Super Output Areas (LSOAs) in London needs to be loaded in. Additionally it is useful to check the coordinate reference system (CRS) of this file, as it should be projected to British National Grid - 27700, as this is the most commonly used format in the UK. After loading the package in, it is useful to check the shape to see if the data looks accurate.\n\n#Load LSOA London 2021 Geopackage into R\nLSOA_London &lt;- st_read(\"LSOA2021_London.gpkg\")\n\nReading layer `lsoa2021__lsoa_2021_ew_bgc_v3' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\LSOA2021_London.gpkg' \n  using driver `GPKG'\nSimple feature collection with 4994 features and 8 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 503574.2 ymin: 155850.8 xmax: 561956.7 ymax: 200933.6\nProjected CRS: OSGB36 / British National Grid\n\n#Inspect CRS\nst_crs(LSOA_London)\n\nCoordinate Reference System:\n  User input: OSGB36 / British National Grid \n  wkt:\nPROJCRS[\"OSGB36 / British National Grid\",\n    BASEGEOGCRS[\"OSGB36\",\n        DATUM[\"Ordnance Survey of Great Britain 1936\",\n            ELLIPSOID[\"Airy 1830\",6377563.396,299.3249646,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4277]],\n    CONVERSION[\"British National Grid\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",49,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-2,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996012717,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",400000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",-100000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"United Kingdom (UK) - offshore to boundary of UKCS within 49°45'N to 61°N and 9°W to 2°E; onshore Great Britain (England, Wales and Scotland). Isle of Man onshore.\"],\n        BBOX[49.75,-9.01,61.01,2.01]],\n    ID[\"EPSG\",27700]]\n\n#27700\n\n#Check if shape is accurate\ntm_shape(LSOA_London)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nThis is the correct shape of London with no LSOAs missing, so the next step can be conducted. The bedroom data from the 2021 census needs to be loaded into R. This data is aggregated at the LSOA level, which is useful as this is the same level as the geospatial data for London loaded above.\n\n#Load housing bedroom data into R from NOMIS\nbedrooms_lsoa &lt;- read.csv('census2021-ts050-lsoa.csv')\nView(bedrooms_lsoa)\n\nViewing the dataset shows that the names of all the variables in this dataset are very long to type out, so they can be simplified as shown below.\n\n#Rename columns to make them shorter\nbedrooms_lsoa$totalbedrooms &lt;- bedrooms_lsoa$Number.of.bedrooms..Total..All.households\nbedrooms_lsoa$onebed &lt;- bedrooms_lsoa$Number.of.bedrooms..1.bedroom\nbedrooms_lsoa$twobed &lt;- bedrooms_lsoa$Number.of.bedrooms..2.bedrooms\nbedrooms_lsoa$threebed &lt;- bedrooms_lsoa$Number.of.bedrooms..3.bedrooms\nbedrooms_lsoa$fourbed &lt;- bedrooms_lsoa$Number.of.bedrooms..4.or.more.bedrooms\n\nNow the variable names are easy to understand and shorter to fit nicely into the R script.\nThe data from both the bedroom data frame, and the London LSOA file need to be merged together to create the maps by the LSOA code. A left join is conducted here, indicated by 'all.x=T', as this allows all of the geographic regions from the LSOA_London object to be preserved. This means that if there is missing data for bedrooms for a particular LSOA, the LSOA will still be mapped and not removed from the data.\n\n#Merge LSOA_London spatial file with the bedroom data by geography code\nLondon_bedrooms_LSOA&lt;- merge(LSOA_London, bedrooms_lsoa, by.x=\"LSOA21CD\", by.y=\"geography.code\", all.x=T)\n\nIt is important to check for NA values after a left join, as these would need to be adjusted before creating the maps.\n\n#Check for NAs\nsum(is.na(London_bedrooms_LSOA))\n\n[1] 0\n\n\nLuckily there are no NA values, meaning the left join of the data took place without any issues.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#basic-map",
    "href": "map_presentation.html#basic-map",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Basic Map",
    "text": "Basic Map\nBefore producing a basic map, I have inserted a map of the boroughs of London for reference, to make it easier to interpret the maps, and provide locations for those reading this report that are unfamiliar with London (Source: https://fity.club/lists/suggestions/boroughs-of-london-map/).\n\n\n\n\n\n\n\n\n\nA basic map can now be produced. All maps in this report focus on properties with 4 or more bedrooms, so this map shows the number of properties in each LSOA with 4 or more bedrooms. A quantile style map is used for this basic map, but in later sections I will explain and illustrate the different styles of maps, and choose an appropriate map for the final maps.\n\n#First map, basic quantile map showing number of 4+ bedroom properties\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbed\",\n          style = \"quantile\",\n          palette = \"Blues\",\n          n = 5,\n          title = \"Number of properties with 4 or more bedrooms\") +\n  tm_layout(main.title = \"Number of properties with 4 or more bedrooms in London (2021)\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nIMPORTANT NOTE: Titles on maps produced may not fit onto the map fully. To fix this, make the size of the plot window in RStudio larger to allow the map to be displayed properly.\nThis map shows that LSOAs in Central London have the lowest number of properties with 4 or more bedrooms, and LSOAs towards the edge of London, in boroughs such as Bromley and Barnet, have the highest number of properties with 4 or more bedrooms. This is as expected as there is more space to build larger properties towards the edge of London than compared to the centre where space is limited.\nHowever, this map has a major issue. It shows the absolute number of properties with 4 or more bedrooms in each LSOA. As LSOAs vary by size, there can be a different total number of properties in each LSOA, for example larger LSOAs in the suburbs may contain more total properties, as there is more residential zoning, meaning there would be a higher chance of more properties having 4 or more bedrooms. There is a lack of consistency in this map, as each LSOA does not have the same number of total properties.\nIt is important to try not to map absolute values of a variable, such as crime (or in this case number of bedrooms), and instead create a rate or proportion when mapping. The next section outlines how to transform these absolute values into a percentage to create a more useful map.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#transforming-data",
    "href": "map_presentation.html#transforming-data",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Transforming Data",
    "text": "Transforming Data\nSince the ‘number of properties with 4 or more bedrooms’ metric is problematic, this can be transformed to the ‘percentage of properties with 4 or more bedrooms’. This is a much better metric as it now shows which LSOAs have the highest proportion of large properties, by accounting for the differing sizes of LSOAs and differing numbers of properties in LSOAs.\nTo create the new percentage variable, the number of properties in each LSOA with 4 or more bedrooms can be divided by the total number of properties in each LSOA, and then multiplied by 100.\n\n#Create % variable\nLondon_bedrooms_LSOA$fourbedperc &lt;- (London_bedrooms_LSOA$fourbed/London_bedrooms_LSOA$totalbedrooms)*100\n\nThis new variable can now be mapped in the same format and style as the previous map.\n\n#Create map with new % variable\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"quantile\",\n          palette = \"Blues\",\n          n = 5,\n          title = \"Percentage of properties with 4 or more bedrooms\") +\n  tm_layout(main.title = \"Bedroom data converted to %\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nThis new map provides a better understanding of which areas of London have the most multi bedroom homes. As expected this is mainly in the suburbs with many areas of Bromley, Barnet and Harrow having the greatest percentage of homes with 4 or more bedrooms. Areas in Central and East London have the lowest percentage of properties with 4 or more bedrooms, but there are some areas of Kensington & Chelsea and Westminster with higher percentages. While the map may look slightly similar to the previous map, it provides a more accurate representation of property data for London.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#map-style-quantile",
    "href": "map_presentation.html#map-style-quantile",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Map Style: Quantile",
    "text": "Map Style: Quantile\nWhen creating a map using 'tmap' it is important to specify the style of the map using 'style='. After specifying the number of classes in the map (in this case 5 classes), the style of how the 5 colour classes are created can be specified. Each style is a different way of presenting the bedroom data in a map.\nBefore providing an overview of the quantile method, it is useful to visualise the distribution of the 'fourbedperc' variable using a histogram.\n\n#Create histogram of % variable\nggplot(London_bedrooms_LSOA, aes(x=fourbedperc)) +\n  geom_histogram(binwidth = 1, color = 'black', fill = '#ff2800') +\n  labs(title = 'Distribution of the percentage of properties with 4 or more bedrooms', \n       x='Count', \n       y='Percentage of properties with four or more bedrooms')\n\n\n\n\n\n\n\n\nThis histogram shows that most LSOAs in London have a percentage of properties with four or more bedrooms between 4 and 20 percent. This histogram shows that the data is positively skewed to the right, where there are much fewer LSOAs with more than 35% of properties having 4 or more bedrooms. The challenge of mapping style is to divide the data from this histogram into 5 representative classes on a map.\nAdditionally, a set of summary statistics can be obtained for the variable to identify the mean, median and interquartile range.\n\n#Obtain summary statistics of % variable\nsummary(London_bedrooms_LSOA$fourbedperc)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  0.000   9.044  15.371  18.960  25.502  80.100 \n\n\n50% of the data lies below 15.371%, and the mean is 18.96, indicating that most LSOAs do not have a high percentage of properties with more than 4 bedrooms.\nThe first style outlined in this report is the 'quantile' style. This method divides the total number of LSOAs (in this case 4994) into 5 equally sized classes, so each class represents 20% of the data evenly. This is shown in the map below, with a histogram in the legend, coloured in by the different classes.\n\n#Create quantile map\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"quantile\",\n          palette = \"Blues\",\n          n = 5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist = TRUE) +\n  tm_layout(main.title = \"Quantile style map\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nThis map has already been interpreted in a previous section, but the histogram in the legend shows clearly how the data has been divided into 5 classes with an equal number of LSOAs. This is a useful map to use when identifying the bottom or top 20% of LSOAs, and is commonly used when mapping variables such as the Index of Multiple Deprivation (IMD), which is measured in 10 deciles, each representing 10% of LSOAs in the United Kingdom. For this map there is an issue where the class sizes significantly vary, where one class is less than 5% wide, but one class is over 50% wide, creating an unappealing legend.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#map-style-fixed-breaks",
    "href": "map_presentation.html#map-style-fixed-breaks",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Map Style: Fixed Breaks",
    "text": "Map Style: Fixed Breaks\nThe 'fixed' style allows the user to manually specify the size of every class break using the ‘breaks=’ line of code. As the data ranges from 0 to 80.1 (rounded to 81), fixed breaks can be used to create equal sized breaks, equally spaced out between 0 and 81, as shown below.\n\n#Create fixed breaks map\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"fixed\",\n          breaks = c(0, 16.2, 32.4, 48.6, 64.8, 81),\n          palette = \"Blues\",\n          n = 5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist = TRUE) +\n  tm_layout(main.title = \"Fixed Breaks style map\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nThis map has a very different appearance compared to the quantile map, with the majority of LSOAs being shaded in the lightest blue. This map is useful in identifying which LSOAs have the highest percentage of properties with more than 4 bedrooms. These appear to be located in Barnet, Harrow, Wandsworth and Sutton, providing a different pattern to the map above which indicated that Bromley had the highest percentages. The main issue with this map is the class colours, as over 50% of the data (referring back to the median value) is coloured in the lightest shade of blue, which does not provide much useful information on the areas of London with the lowest percentages of 4 or more bed homes. Additionally with over 80% of the map coloured in the lightest two shades, this map is very difficult to interpret. The class sizes can be amended and then the map can be reinterpreted to solve this issue.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#map-style-pretty",
    "href": "map_presentation.html#map-style-pretty",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Map Style: Pretty",
    "text": "Map Style: Pretty\nThis map style aims to produce the ‘prettiest’ set of classes for the map, as shown below.\n\n#Create pretty map\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"pretty\",\n          palette = \"Blues\",\n          n = 5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist = TRUE) +\n  tm_layout(main.title = \"Pretty style map\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nWhile the classes sizes are the most aesthetically pleasing, being spaced evenly between 0 and 100%, this map suffers from the same issues as the fixed breaks map to a greater degree. Only 1 LSOA has more than 80% of properties having 4 or more bedrooms, meaning that this map is a very poor representation of the variable of interest.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#map-style-natural-breaks",
    "href": "map_presentation.html#map-style-natural-breaks",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Map Style: Natural Breaks",
    "text": "Map Style: Natural Breaks\nThe natural breaks style uses the 'jenks' or 'fisher' algorithm to determine the best set of class breaks in a set of data. The algorithm helps to minimise the variance within each class and maximize the variance between different classes, creating distinct classes. For this map, the 'fisher' style has been chosen as this works better with a larger set of data (4994 unique data points).\n\n#Create fisher map\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"fisher\",\n          palette = \"Blues\",\n          n=5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist=TRUE) +\n  tm_layout(main.title = \"Natural Breaks/Fisher style map\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nThis map provides a bridging point between the excessive levels of light colour usage shown in the ‘pretty’ and ‘fixed’ maps, and the large amounts of darker shades of blue in the ‘quantile’ map. It is both easy to identify which LSOAs have the highest percentage of 4 or more bedroom houses in Barnet and Wandsworth, and easy to spot that Central and East London have the lowest percentages. This map still suffers from the same issues as the ‘pretty’ and ‘fixed’ maps, where a large proportion of the map is coloured in light shades of blue, but to a lesser extent. However, this map does show a good representation of the bedroom data.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#map-style-headtails",
    "href": "map_presentation.html#map-style-headtails",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Map Style: Headtails",
    "text": "Map Style: Headtails\nThe 'headtails' style is useful when dealing with right skewed data, such as our bedroom percentage data, and was proposed by Jiang (2013) https://www.tandfonline.com/doi/full/10.1080/00330124.2012.700499. This method is useful in determining the extreme values to the right of the distribution by creating appropriate classes.\n\n#Create headtails map\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"headtails\",\n          palette = \"Blues\",\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist = TRUE) +\n  tm_layout(main.title = \"Headtails style map\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nThis map clearly shows the LSOAs with higher percentages of properties with 4 or more bedrooms accurately, such as areas in Harrow, North Hillingdon, Barnet, Richmond, Wandsworth, Sutton, Havering and Redbridge. However, similar to the ‘pretty’ and ‘fixed’ maps, LSOAs at the bottom of the distribution with small percentages are grouped together into 1 large class, leading to over 60% of the map being coloured in light blue. This map style would be useful to present which LSOAs have the highest rates or percentages of a variable of interest, and is commonly used when presenting crime statistics.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#map-style-continuous",
    "href": "map_presentation.html#map-style-continuous",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Map Style: Continuous",
    "text": "Map Style: Continuous\nThe continuous 'cont' map style provides a continuous colour gradient between 0 and 80 meaning the lowest percentages are coloured in the lightest shades of blue and the highest values in the darkest shades. This method uses the entire range of the colour palette (10 different shades of blue), so can provide a map with a variety of shades to identify different regions.\n\n#Create cont map\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"cont\",\n          palette = \"Blues\",\n          title = \"Percentage of properties with 4 or more bedrooms\") +\n  tm_layout(main.title = \"Continuous style map\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nThis is a very visually appealing map, as both high and low percentages are coloured in appropriately and are easy to distinguish. The major issue is that the continuous colour gradient does not use a set of fixed class widths, so it is not easy to determine the specific values which a coloured LSOA lies within. This is a reason why this style of map is not used commonly to present this style of data. However, this style of map is useful to use when presenting Kernel Density maps, as shown in the image below for weapon crimes in Birmingham, England.\n\n\n\n\n\n\n\n\n\nThis is a more appropriate set of data to use this style of map, to indicate where weapon possession crimes are more likely to occur in this city.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#selection-of-map-style",
    "href": "map_presentation.html#selection-of-map-style",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Selection of map style",
    "text": "Selection of map style\nAfter viewing all the different styles of maps produced for the bedroom data above, I have chosen the 'fisher' natural breaks method for the final map, as this map provides a good representative use of the colour palette, while also being easy to identify LSOAs with low and high percentages of properties with 4 or more bedrooms. Additionally, this style of map has classes which are appropriately sized, neither too big or too small, being a good fit for the final map.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#adding-borders",
    "href": "map_presentation.html#adding-borders",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Adding borders",
    "text": "Adding borders\nThroughout all of the maps produced above, it is hard to distinguish between many LSOAs with similar colours, as it is unclear where one LSOA ends and the next one begins. To deal with this issue, borders can be added on the map between the LSOAs to provide outlines of their locations. The tm_borders function has 3 parameters which need specifying: 'lwd', 'col' and 'alpha'. 'lwd' indicates the line width of the border, 'col' indicates the colour of the border, and 'alpha' indicates the transparency of the border. For LSOA borders, a low 'lwd' and 'alpha' are selected to make sure the borders are not too thick and cover neighbouring LSOAs.\n\n#Add thin LSOA borders to fisher map\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"fisher\",\n          palette = \"Blues\",\n          n=5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist=TRUE) +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.2) +\n  tm_layout(main.title = \"Adding LSOA borders\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nWith these thin borders, it is easier to distinguish between each LSOA, especially in areas with the same colour class throughout.\nHowever, these borders can be made to look even better. Throughout this entire report I have been stating names of boroughs in London from the map at the start, but this map does not contain those borders, making it difficult to identify exactly which borough each LSOA lies within. Additionally, those unfamiliar to the layout of London may find it difficult to locate different areas of London without clear borders.\nTo add these borough borders, the local authority geopackage needs to be loaded into R.\n\n#Load .gpkg containing information on Local Authorities\nLAs_2021 &lt;- st_read('Local_Authority_Districts_December_2021_GB_BGC.gpkg')\n\nReading layer `LAD_DEC_2021_GB_BGC' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\Local_Authority_Districts_December_2021_GB_BGC.gpkg' \n  using driver `GPKG'\nSimple feature collection with 363 features and 8 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 5512.998 ymin: 5352.6 xmax: 655653.8 ymax: 1220302\nProjected CRS: OSGB36 / British National Grid\n\n\nAfter viewing the dataset, the shapes of the 32 boroughs of London and the City of London need to be extracted from the spatial file containing information on all local authorities in England.\nConveniently, all the necessary areas for this map are located next to each other in the dataset in rows 277 to 309, making the filtering of this data easier.\n\n#Extract rows which contain information on London boroughs\nrows_to_extract &lt;- 277:309\nLondon_Boroughs &lt;- LAs_2021[rows_to_extract, ]\n\nA basic map can be created to see if the filtering has been conducted correctly.\n\n#Create a basic map of boroughs\ntm_shape(London_Boroughs)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nThis appears to be accurate, showing all 32 London borough outlines and the City of London.\nNow these borders can be added to the map of bedroom data in London. The borough outlines are going to be thicker and opaque, compared to the LSOA borders, as these need to be clearer and more visible on the map produced. To add these borders, another tm_shape layer needs to be added after the tm_borders for the LSOA bedroom data, and then the same tm_borders function can be conducted afterwards, as shown below.\n\n#Adding thick borough borders\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"fisher\",\n          palette = \"Blues\",\n          n=5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist=TRUE) +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.2) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_layout(main.title = \"Adding borough borders\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2)\n\n\n\n\n\n\n\n\nNow it is very clear to see which boroughs each LSOA lies within, and boroughs with high percentages, such as Barnet and Richmond, and low percentages, such as Tower Hamlets and Islington.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#adding-additional-layout-elements",
    "href": "map_presentation.html#adding-additional-layout-elements",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Adding additional layout elements",
    "text": "Adding additional layout elements\nThere are still some key elements missing from the map that need to be added before being published. The first is adding a compass. All maps should have a compass, and this can be added using the tm_compass function, where the type of compass (in this case an arrow), and the location of the compass on the map (bottom right) can be specified.\nAll maps should also include a scale bar for reference. This can be added with the tm_scale_bar function, where position can be specified. The size of the scale bar can be adjusted using the 'breaks' line of code, where in this case the scale bar is 20 kilometers long, with breaks every 5 kilometers.\nWhen producing maps using open access data, data sources should be listed on the map using the tm_credits function. This allows a small section of text to be written at the bottom of the map. Size, style and position of the text can be adjusted. For the maps produced, the two sources of data were ONS, for the geopackages, and NOMIS, for the bedroom data.\n\n#Adding additional map elements\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"fisher\",\n          palette = \"Blues\",\n          n=5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist=TRUE) +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.2) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_layout(main.title = \"Adding compass, scale bar & credits\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +  \n  tm_compass(type = \"arrow\",\n              position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nNow this map can be published online, as all the elements needed in a map are present, and the data is presented effectively.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#bonus-creating-a-custom-colour-palette",
    "href": "map_presentation.html#bonus-creating-a-custom-colour-palette",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Bonus: Creating a custom colour palette",
    "text": "Bonus: Creating a custom colour palette\nWhile the above map is able to be published without issues, the colour palette could be changed. In all the maps produced the colour palette has been specified as 'Blues' from the ‘RColorBrewer’ package, but this package contains many other different palettes as shown below.\n\n#View colour palette\nRColorBrewer::display.brewer.all()\n\n\n\n\n\n\n\n\nThere a variety of different colour palettes to choose from here.\nCustom colour palettes can also be created. Personally, I do not like the large amount of pale blue/white on the map, so changing this to a different more visible colour would be ideal. To do this, the hex code of the each colour for each class needs to be specified in R. Two useful websites to select hex codes are https://www.w3schools.com/colors/colors_mixer.asp and https://www.colorhexa.com/. In this map, low percentages are yellow, and high percentages are green, with a transition of these colours in the classes in between.\n\n#Create final map with custom colours\ntm_shape(London_bedrooms_LSOA) +\n  tm_fill(col = \"fourbedperc\",\n          style = \"fisher\",\n          palette = c('#ffff00', '#bfe600', '#80cc00', '#40b200', '#009900'),\n          n=5,\n          title = \"Percentage of properties with 4 or more bedrooms\",\n          legend.hist=TRUE) +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.2) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_layout(main.title = \"% of properties with 4 or more bedrooms in London (2021)\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +  \n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nNow this is an easy to interpret, colourful map, with all the key elements required for publishing.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#conclusion",
    "href": "map_presentation.html#conclusion",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "Conclusion",
    "text": "Conclusion\nBy reading this report, the user should now be able to design a presentable map in RStudio using tmap, and be able to make choices as to which style of map is appropriate when creating maps on variables of interest.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "map_presentation.html#references",
    "href": "map_presentation.html#references",
    "title": "Map Presentation and Styles in RStudio using tmap",
    "section": "References",
    "text": "References\nJiang, B. (2013) ‘Head/Tail Breaks: A New Classification Scheme for Data with a Heavy-Tailed Distribution’, The Professional Geographer, 65 ,3, 482–494, https://www.tandfonline.com/doi/full/10.1080/00330124.2012.700499.\nMedina, J. and R. Solymosi (2022) ‘Chapter 4 Mapping rates and counts’, Crime Mapping and Spatial Data Analysis using R, https://maczokni.github.io/crime_mapping/mapping-rates-and-counts.html\nNorth, M.A. (2009) ‘A Method for Implementing a Statistically Significant Number of Data Classes in the Jenks Algorithm’, 2009 Sixth International Conference on Fuzzy Systems and Knowledge Discovery, 35-38, https://ieeexplore.ieee.org/abstract/document/5358673?casa_token=wEQNaCewnNQAAAAA:bkS9ugVODIWEeQl8p8YmJU9bUCRk117kTHnmbW2MkNp-T9omDDdrtRQCBZKvGFvYoDXBBozN.\nRDocumentation (2024) ‘tm_fill: Draw polygons’, https://www.rdocumentation.org/packages/tmap/versions/3.3-4/topics/tm_fill.\nTennekes M. (2018), ‘tmap: Thematic Maps in R’, Journal of Statistical Software, 84, 6, 1–39, https://r-tmap.github.io/tmap/.\nTennekes, M. and J. Nowosad (2021) ‘Chapter 6 Visual Variables’, Elegant and informative maps with tmap, https://r-tmap.github.io/tmap-book/visual-variables.html.",
    "crumbs": [
      "About",
      "Map Presentation and Styles in RStudio using tmap"
    ]
  },
  {
    "objectID": "maup_illustrated.html",
    "href": "maup_illustrated.html",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "",
    "text": "The Multiple Aerial Unit Problem, also known as the MAUP, is a major issue faced in geospatial analysis. The MAUP can directly impact the results of spatial analysis tasks, due to two factors: the scale of analysis, and the zoning of geographic regions. This report aims to illustrate how the MAUP can affect the results of spatial analysis, by mapping different scales and zones of data on the same variable (Ethnicity: Proportion of Asian Indians living in each data zone). The report will additionally show how further analysis beyond producing simple maps, such as spatial autocorrelation, is directly impacted by the MAUP.\nIf you would like to reference this report please use the following reference:\nMistri V. (2024) ‘The Multiple Aerial Unit Problem Illustrated’, Vishal Mistri GIS Portfolio, https://vmistri91.github.io/Portfolio/maup_illustrated.html.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#introduction",
    "href": "maup_illustrated.html#introduction",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "",
    "text": "The Multiple Aerial Unit Problem, also known as the MAUP, is a major issue faced in geospatial analysis. The MAUP can directly impact the results of spatial analysis tasks, due to two factors: the scale of analysis, and the zoning of geographic regions. This report aims to illustrate how the MAUP can affect the results of spatial analysis, by mapping different scales and zones of data on the same variable (Ethnicity: Proportion of Asian Indians living in each data zone). The report will additionally show how further analysis beyond producing simple maps, such as spatial autocorrelation, is directly impacted by the MAUP.\nIf you would like to reference this report please use the following reference:\nMistri V. (2024) ‘The Multiple Aerial Unit Problem Illustrated’, Vishal Mistri GIS Portfolio, https://vmistri91.github.io/Portfolio/maup_illustrated.html.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#understanding-the-maup",
    "href": "maup_illustrated.html#understanding-the-maup",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Understanding the MAUP",
    "text": "Understanding the MAUP\nThe MAUP arises when the results of geospatial analysis change depending on the spatial units used, such as Lower Super Output Areas (LSOAs) or Electoral Wards. As stated above, the MAUP is characterised by two effects: the scale effect and the zoning effect.\nThe scale effect occurs when different results in the outcome occur as data has been aggregated at different levels of spatial resolution, for example, analysing data at the LSOA level versus the Ward level. When spatial units are larger, there can be a loss of detail and an increase in correlation between variables, potentially leading to inaccurate conclusions. Using the levels stated above, Wards are much larger than LSOAs, and may mask localised trends in the data being analysed. An example of the scale effect is shown below, showing that larger spatial units smooth variation and trends in the data (Source: https://gisgeography.com/maup-modifiable-areal-unit-problem/).\n\n\n\n\n\n\n\n\n\nThe zoning effect occurs when the boundaries of geospatial units are changed while retaining the same number of units. This may lead to inconsistencies in results, as the different ways of grouping data can significantly affect outcomes. A common example of this is the different ways of creating voting district boundaries, which can lead to different conclusions about voting patterns, known as ‘gerrymandering’. An example of the zoning effect is shown below, where different divisions of the same data can create different zones which have a ‘blue’ or ‘red’ majority (Source: Bernard, 2019).\n\n\n\n\n\n\n\n\n\nThroughout this report, the scale effect is a more significant concern, as UK census data is aggregated at many different spatial scales, compared to a smaller degree of zoning changes in London.\nThe MAUP is extremely important in geographical, sociological, political and economic analysis as it can lead to ecological fallacies where incorrect assumptions and trends are interpreted about individuals using aggregated data. Understanding and mitigating the effects of the MAUP is an essential part of geospatial data analysis leading to accurate policy-making.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#data-sources",
    "href": "maup_illustrated.html#data-sources",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Data Sources",
    "text": "Data Sources\nAll spatial boundaries have been downloaded from the ONS Open Geography Portal https://geoportal.statistics.gov.uk/. Boundaries used include: 2021 Output Areas (OAs), 2021 Lower Super Output Areas (LSOAs), 2021 Middle Super Output Areas (MSOAs) and 2021 Electoral Wards.\nTo obtain the 2021 census data on ethnicity across all spatial levels, the Nomis website can be used https://www.nomisweb.co.uk/.\nAll of the files used in this report can be found in this Google Drive folder https://drive.google.com/drive/folders/1NexsgLGkDpfTyOAAL9_08LIlyelk1mbO?usp=sharing.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#data-preparation-overview",
    "href": "maup_illustrated.html#data-preparation-overview",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Data Preparation: Overview",
    "text": "Data Preparation: Overview\nThis report will focus on the locations of Asian: Indian ethnic groups across London at different spatial levels, but there are many different data preparation steps to conduct, as the each different geopackage (4: OA, LSOA, MSOA, Ward), needs to be filtered to contain data for London, each ethnicity dataset needs to be merged correctly to its corresponding geopackage, and new variables for the proportion of people with Indian ethnicity need to be created before mapping.\nFeel free to skip these data preparation steps if you would like to go straight to the differences in geospatial analysis due to the scale effect.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#data-preparation-geopackages",
    "href": "maup_illustrated.html#data-preparation-geopackages",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Data Preparation: Geopackages",
    "text": "Data Preparation: Geopackages\nFirst, all the relevant packages for this report need to be loaded in.\n\n#Load relevant packages\nlibrary(sf)\nlibrary(tmap)\nlibrary(ggplot2)\nlibrary(RColorBrewer)\nlibrary(spdep)\nlibrary(tidyverse)\n\nNext, all the geopackages, which contain geospatial information on the shape and characteristics of each data zone, need to be loaded into RStudio. While the OA, LSOA, MSOA files have matching geographic codes to the 2021 census data, the matching geopackage for the ward census data is the 2022 Ward file.\n\n#Load in all the 4 types of boundaries\nOAs &lt;- st_read(\"2021_OA.gpkg\")\n\nReading layer `OA_2021_EW_BGC_V2' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\2021_OA.gpkg' \n  using driver `GPKG'\nSimple feature collection with 188880 features and 9 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 82668.52 ymin: 5352.6 xmax: 655653.8 ymax: 657539.4\nProjected CRS: OSGB36 / British National Grid\n\nLSOAs &lt;- st_read(\"2021_LSOA.gpkg\")\n\nReading layer `LSOA_2021_EW_BGC_V3' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\2021_LSOA.gpkg' \n  using driver `GPKG'\nSimple feature collection with 35672 features and 7 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 82668.52 ymin: 5352.6 xmax: 655653.8 ymax: 657539.4\nProjected CRS: OSGB36 / British National Grid\n\nMSOAs &lt;- st_read(\"2021_MSOA.gpkg\")\n\nReading layer `MSOA_2021_EW_BGC_V2' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\2021_MSOA.gpkg' \n  using driver `GPKG'\nSimple feature collection with 7264 features and 7 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 82668.52 ymin: 5352.6 xmax: 655653.8 ymax: 657539.4\nProjected CRS: OSGB36 / British National Grid\n\nWards &lt;- st_read(\"2022_Ward.gpkg\")\n\nReading layer `WD_DEC_22_GB_BGC' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\2022_Ward.gpkg' \n  using driver `GPKG'\nSimple feature collection with 8021 features and 11 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 5512.998 ymin: 5352.6 xmax: 655653.8 ymax: 1220299\nProjected CRS: OSGB36 / British National Grid\n\n\nAs shown in the message, the projected coordinate reference system (CRS) of these files is 'British National Grid', which is good, as this is the standard CRS for the UK.\nNow the data zones for London need to be filtered out of these larger geopackages, which contain data for the whole of England. For those unfamiliar with the shape of London, a map is included below with the shape and names of all the boroughs within Greater London (Source: https://fity.club/lists/suggestions/boroughs-of-london-map/).\n\n\n\n\n\n\n\n\n\nThere are different ways of conducting this filter for different types of geopackages, so I will first start with the OA boundaries. As not all the OAs in London are listed in consecutive rows of the dataset, directly extracting the rows of interest is not possible. In the column LSOA21NM, the name of the London borough associated with the OA is named, so the best way to filter this data is to use the grepl function which extracts all rows which contain the name of each of the 32 London boroughs and the City of London to form a new dataset, as shown below.\n\nOA_London &lt;- OAs[grepl('City of London|Barking and Dagenham|Barnet|Bexley|Brent|Bromley|Camden|Croydon|Ealing|Enfield|Greenwich|Hackney|Hammersmith and Fulham|Haringey|Harrow|Havering|Hillingdon|Hounslow|Islington|Kensington and Chelsea|Kingston upon Thames|Lambeth|Lewisham|Merton|Newham|Redbridge|Richmond upon Thames|Southwark|Sutton|Tower Hamlets|Waltham Forest|Wandsworth|Westminster', OAs$LSOA21NM), ]\n#Test shape to see if all OAs have transferred\ntm_shape(OA_London)+\n  tm_fill() +\n  tm_borders\n\n\n\n\n\n\n\n\nAll OAs in Greater London have been selected correctly, but there is a discrepancy on this map in the North East. As the grepl function is extracting all rows which contain the words listed above, it has also extracted OAs in a different region just outside of London. In London, there is a borough called ‘Brent’, but in Essex there is an area called ‘Brentwood’, so grepl has extracted LSOAs within Brentwood as well as Brent. To fix this, the Brentwood wards can be removed from the dataset.\n\n#Remove Brentwood\nOA_London &lt;- subset(OA_London, !grepl(\"Brentwood\", LSOA21NM, ignore.case = TRUE))\n#Test to see if shape is correct\ntm_shape(OA_London)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nNow this map is an accurate depiction of all the OAs within Greater London.\nThe same process as above can be conducted to filter out LSOAs within London. The difference will be that there are less LSOAs, as LSOAs are a larger spatial unit than OAs.\n\n#Filter LSOAs using grepl\nLSOA_London &lt;- LSOAs[grepl('City of London|Barking and Dagenham|Barnet|Bexley|Brent|Bromley|Camden|Croydon|Ealing|Enfield|Greenwich|Hackney|Hammersmith and Fulham|Haringey|Harrow|Havering|Hillingdon|Hounslow|Islington|Kensington and Chelsea|Kingston upon Thames|Lambeth|Lewisham|Merton|Newham|Redbridge|Richmond upon Thames|Southwark|Sutton|Tower Hamlets|Waltham Forest|Wandsworth|Westminster', LSOAs$LSOA21NM), ]\n#Remove Brentwood\nLSOA_London &lt;- subset(LSOA_London, !grepl(\"Brentwood\", LSOA21NM, ignore.case = TRUE))\n#Test shape to see if all LSOAs have transferred\ntm_shape(LSOA_London)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nThis map is an accurate depiction of all the LSOAs within Greater London.\nThe same process as above can be conducted to filter out MSOAs within London. The difference will be that there are less MSOAs, as MSOAs are a larger spatial unit than LSOAs.\n\n#Filter MSOAs using grepl\nMSOA_London &lt;- MSOAs[grepl('City of London|Barking and Dagenham|Barnet|Bexley|Brent|Bromley|Camden|Croydon|Ealing|Enfield|Greenwich|Hackney|Hammersmith and Fulham|Haringey|Harrow|Havering|Hillingdon|Hounslow|Islington|Kensington and Chelsea|Kingston upon Thames|Lambeth|Lewisham|Merton|Newham|Redbridge|Richmond upon Thames|Southwark|Sutton|Tower Hamlets|Waltham Forest|Wandsworth|Westminster', MSOAs$MSOA21NM), ]\n#Remove Brentwood\nMSOA_London &lt;- subset(MSOA_London, !grepl(\"Brentwood\", MSOA21NM, ignore.case = TRUE))\n#Check Shape\ntm_shape(MSOA_London)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nThis is an accurate map of the MSOAs within London, where MSOAs are visibly larger than LSOAs.\nFor the Ward data the same grepl method can be used. The difference will be that there are less Wards, as Wards are typically larger than MSOAs.\n\n#Filter Wards using grepl\nWard_London &lt;- Wards[grepl('City of London|Barking and Dagenham|Barnet|Bexley|Brent|Bromley|Camden|Croydon|Ealing|Enfield|Greenwich|Hackney|Hammersmith and Fulham|Haringey|Harrow|Havering|Hillingdon|Hounslow|Islington|Kensington and Chelsea|Kingston upon Thames|Lambeth|Lewisham|Merton|Newham|Redbridge|Richmond upon Thames|Southwark|Sutton|Tower Hamlets|Waltham Forest|Wandsworth|Westminster', Wards$LAD22NM), ]\n#Remove Brentwood\nWard_London &lt;- subset(Ward_London, !grepl(\"Brentwood\", LAD22NM, ignore.case = TRUE))\n#Check Shape\ntm_shape(Ward_London)+\n  tm_fill() +\n  tm_borders()\n\n\n\n\n\n\n\n\nThis is an accurate representation of all the Wards in Greater London.\nIn the maps produced, it is a good idea to provide outlines of all the boroughs in London, to make it easier to identify zones of interest. Below is an overview of how to do this, from extracting rows of data which contain London Boroughs, to producing a quick map.\n\n#Load .gpkg containing information on Local Authorities\nLAs_2021 &lt;- st_read('Local_Authority_Districts_December_2021_GB_BGC.gpkg')\n\nReading layer `LAD_DEC_2021_GB_BGC' from data source \n  `C:\\Users\\vmist\\Documents\\Vishal\\Vishal\\PortfolioLocal\\Local_Authority_Districts_December_2021_GB_BGC.gpkg' \n  using driver `GPKG'\nSimple feature collection with 363 features and 8 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 5512.998 ymin: 5352.6 xmax: 655653.8 ymax: 1220302\nProjected CRS: OSGB36 / British National Grid\n\n#Extract rows which contain information on London boroughs\nrows_to_extract &lt;- 277:309\nLondon_Boroughs &lt;- LAs_2021[rows_to_extract, ]\n#Create a basic map of boroughs\ntm_shape(London_Boroughs)+\n  tm_fill() +\n  tm_borders()",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#data-preparation-ethnicity-data",
    "href": "maup_illustrated.html#data-preparation-ethnicity-data",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Data Preparation: Ethnicity Data",
    "text": "Data Preparation: Ethnicity Data\nNow that the geopackages have been prepared for the analysis, by selecting data zones which only lie within Greater London, the ethnicity data can be loaded and prepared in R for the analysis. All the ethnicity census files are in the .csv file format which can be read by R easily.\n\n#Load in all the ethnicity datasets at each geographic level\nEthnicity_OA &lt;- read.csv(\"ts021/census2021-ts021-oa.csv\")\nEthnicity_LSOA &lt;- read.csv(\"ts021/census2021-ts021-lsoa.csv\")\nEthnicity_MSOA &lt;- read.csv(\"ts021/census2021-ts021-msoa.csv\")\nEthnicity_Ward &lt;- read.csv(\"ts021/census2021-ts021-ward.csv\")\n\nUpon inspection of these datasets, the names of the columns are all very long, so the columns relevant to this report should be shortened, to make it easier to write code.\n\n#Rename the Indian ethnicity and total population columns to make them shorter for each data frame\nEthnicity_OA$Indian &lt;- Ethnicity_OA$Ethnic.group..Asian..Asian.British.or.Asian.Welsh..Indian\nEthnicity_LSOA$Indian &lt;- Ethnicity_LSOA$Ethnic.group..Asian..Asian.British.or.Asian.Welsh..Indian\nEthnicity_MSOA$Indian &lt;- Ethnicity_MSOA$Ethnic.group..Asian..Asian.British.or.Asian.Welsh..Indian\nEthnicity_Ward$Indian &lt;- Ethnicity_Ward$Ethnic.group..Asian..Asian.British.or.Asian.Welsh..Indian\nEthnicity_OA$Total &lt;- Ethnicity_OA$Ethnic.group..Total..All.usual.residents\nEthnicity_LSOA$Total &lt;- Ethnicity_LSOA$Ethnic.group..Total..All.usual.residents\nEthnicity_MSOA$Total &lt;- Ethnicity_MSOA$Ethnic.group..Total..All.usual.residents\nEthnicity_Ward$Total &lt;- Ethnicity_Ward$Ethnic.group..Total..All.usual.residents\n\nNow these data frames can be merged to their respective spatial dataframes. A left join is conducted here, indicated by 'all.x=T', as this allows all of the geographic regions from the spatial objects (such as OA_London) to be preserved. This means that if there is missing data for ethnicity for a particular data zone, the data zone will still be mapped and not removed from the data.\n\n#Merge geographic data with ethnicity data\nOA_Ethnicity_London&lt;- merge(OA_London, Ethnicity_OA, by.x=\"OA21CD\", by.y=\"geography.code\", all.x=T)\nLSOA_Ethnicity_London&lt;- merge(LSOA_London, Ethnicity_LSOA, by.x=\"LSOA21CD\", by.y=\"geography.code\", all.x=T)\nMSOA_Ethnicity_London&lt;- merge(MSOA_London, Ethnicity_MSOA, by.x=\"MSOA21CD\", by.y=\"geography.code\", all.x=T)\nWard_Ethnicity_London&lt;- merge(Ward_London, Ethnicity_Ward, by.x=\"WD22CD\", by.y=\"geography.code\", all.x=T)\n\nNow the data should be checked for NA values.\n\n#Check for NAs in relevant columns\nsum(is.na(OA_Ethnicity_London$Indian))\n\n[1] 0\n\nsum(is.na(LSOA_Ethnicity_London$Indian))\n\n[1] 0\n\nsum(is.na(MSOA_Ethnicity_London$Indian))\n\n[1] 0\n\nsum(is.na(Ward_Ethnicity_London$Indian))\n\n[1] 25\n\nsum(is.na(OA_Ethnicity_London$Total))\n\n[1] 0\n\nsum(is.na(LSOA_Ethnicity_London$Total))\n\n[1] 0\n\nsum(is.na(MSOA_Ethnicity_London$Total))\n\n[1] 0\n\nsum(is.na(Ward_Ethnicity_London$Total))\n\n[1] 25\n\n\nThere appears to be an issue with NAs in the Ward_Ethnicity_London data frame. In the Ethnicity_Ward data frame, there is no information on ethnicity in the City of London. To solve this issue, all wards in the City of London will be removed from Ward_Ethnicity_London, and this should not cause many issues as the City of London is very small and their wards are much smaller than a standard sized ward.\n\n#Remove City of London rows\nWard_Ethnicity_London &lt;- Ward_Ethnicity_London %&gt;%\n  slice(-(1:25))\n#Check for NAs\nsum(is.na(Ward_Ethnicity_London$Indian))\n\n[1] 0\n\nsum(is.na(Ward_Ethnicity_London$Total))\n\n[1] 0\n\n\nAll is fixed now.\nBefore creating maps, it is a good idea to work out the proportion of Indians in every data zone, instead of mapping the absolute count, as this would be misleading, and this ensures consistency across all of the maps.\n\n#Create % of Indians in data zone variable\nOA_Ethnicity_London$Indianperc &lt;- (OA_Ethnicity_London$Indian/OA_Ethnicity_London$Total)*100\nLSOA_Ethnicity_London$Indianperc &lt;- (LSOA_Ethnicity_London$Indian/LSOA_Ethnicity_London$Total)*100\nMSOA_Ethnicity_London$Indianperc &lt;- (MSOA_Ethnicity_London$Indian/MSOA_Ethnicity_London$Total)*100\nWard_Ethnicity_London$Indianperc &lt;- (Ward_Ethnicity_London$Indian/Ward_Ethnicity_London$Total)*100",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#comparing-choropleth-maps",
    "href": "maup_illustrated.html#comparing-choropleth-maps",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Comparing Choropleth Maps",
    "text": "Comparing Choropleth Maps\nNow it is time to see what the different maps look like, and identify the differences between each map due to the different scales used in the aggregation of the ethnicity data. If you would like to know how to make a presentable map in RStudio, please view my page on “Map Presentation and Styles in RStudio using tmap” https://vmistri91.github.io/Portfolio/map_presentation.html.\nAfter quickly inspecting the data, the highest percentage in a particular data zone is near 85%, so I will be creating 8 data classes equally spaced out in 11 unit increments, for every map to ensure consistency. I will also be using the same colour palette in all maps to help visualise the differences in using different geographic levels.\n\n#Set class break intervals\nbreaks &lt;- c(0,11,22,33,44,55,66,77,88)\n\nThe first map produced will show Asian:Indian ethnicity across all OAs in London\n\n#Create OA map\ntm_shape(OA_Ethnicity_London) +\n  tm_fill(col = \"Indianperc\",\n          style = \"fixed\",\n          palette = 'YlOrRd',\n          n=8,\n          breaks=breaks,\n          title = \"% of Asian:Indian people\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_layout(main.title = \"% of Asian:Indian persons by OA in London (2021)\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +  \n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThis is a very detailed map which shows that the highest percentages of Asian:Indians are located in North-West and West London, mainly in the boroughs of Harrow, Brent, Ealing and Hounslow. There are also other higher percentages located in the Newham/Redbridge areas. The highest percentages are found in Kenton/Kingsbury (Harrow/Brent), Wembley/Alperton/Sudbury (Brent) and Southall (Ealing/Hounslow). As the map is of a high resolution, showing small areas, certain output areas reach up to 88% Asian:Indian ethnicity, and can be identified on the map.\nNow lets look at the same data, but at the LSOA resolution.\n\n#Create LSOA map\ntm_shape(LSOA_Ethnicity_London) +\n  tm_fill(col = \"Indianperc\",\n          style = \"fixed\",\n          palette = 'YlOrRd',\n          n=8,\n          breaks=breaks,\n          title = \"% of Asian:Indian people\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_layout(main.title = \"% of Asian:Indian persons by LSOA in London (2021)\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +  \n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThe first major difference between this map and the OA map is that there are less regions with higher percentages (coloured towards dark red) visible on the map, due to the aggregation of many smaller OAs in a region to form an LSOA. While the 3 key areas identified above are clearly visible still, they are one to two shades lighter in colour, as are many of their surrounding areas. The highest percentage value for an LSOA is now 70.2% down from the mid 80% in the OA map. This is due to the aggregation of spatial units from MAUP’s scale effect.\nNow lets look at the same data, but at the MSOA level.\n\n#Create MSOA map\ntm_shape(MSOA_Ethnicity_London) +\n  tm_fill(col = \"Indianperc\",\n          style = \"fixed\",\n          palette = 'YlOrRd',\n          n=8,\n          breaks=breaks,\n          title = \"% of Asian:Indian people\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_layout(main.title = \"% of Asian:Indian persons by MSOA in London (2021)\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +  \n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nAs the spatial units get larger, it is clear that the trends are smoothed out and averaged due to the scale effect. Now the highest percentage is now only 52.7% down from the 70-80% range above. It has also now become more difficult to identify the areas with the highest percentages of Asian:Indians, as the colour gradient has become less divergent, meaning trends are harder to spot. Areas on thee east side of London are hardly noticeable to have a higher percentage of Asian:Indians, even though in the OA map, certain OAs in Redbridge and Newham are in the 44-66% range.\nNow lets look at the same data at the Ward level.\n\n#Create Ward map\ntm_shape(Ward_Ethnicity_London) +\n  tm_fill(col = \"Indianperc\",\n          style = \"fixed\",\n          palette = 'YlOrRd',\n          n=8,\n          breaks=breaks,\n          title = \"% of Asian:Indian people\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2,\n             col = 'black',\n             alpha = 1) +\n  tm_layout(main.title = \"% of Asian:Indian persons by Ward in London (2021)\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +  \n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nWith Wards being only slightly larger than MSOAs in some cases, the trends are very similar, where most percentages have been smoothed to create lower percentage values over larger areas. What is of interest here is that due to the zoning effect, certain wards have higher percentages over the previous map, due to the slightly different borders of the boundary in the same area. This is evident in Wembley Central, Southall Green, Southall West and Kenton West, which have higher percentages in this map compared to comparably sized areas in the MSOA map.\nAfter viewing all of these maps with different scales, it should be clear that the MAUP is a significant issue in GIS studies, with the scale effect, and zoning effect (to an extent), creating many different trends visible across the different maps. Maps with smaller zones, such as OAs, provide more detail of the trends, and maps with larger zones, such as Wards/MSOAs, smooth variation of the trends, due to the way the data has been aggregated at a larger geographic level.\nHowever, it is important to understand just how significant the MAUP is in geospatial analysis by viewing how the different spatial resolutions above impact a spatial autocorrelation calculation, which is a commonly used query in GIS to identify clusters of a variable across an area.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#spatial-autocorrelation-method",
    "href": "maup_illustrated.html#spatial-autocorrelation-method",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Spatial Autocorrelation: Method",
    "text": "Spatial Autocorrelation: Method\nOne useful technique is spatial autocorrelation, which measures the degree to which similar values (of Asian:Indian ethnicity) occur near each other in a study region, in a positive or negative manner. This concept links to Tobler’s Fist Law of Geography which is “Everything is related to everything else, but near things are more related than distant things”, a foundational concept in GIS. Since this concept looks at neighbour relations between data zones, it will be impacted by the scale effect of the MAUP, which will be illustrated in this section. The scale effect has a significant impact on spatial autocorrelation as when data is aggregated into larger spatial units, internal variability among the data decreases, which leads to smoother data. This could lead to higher spatial autocorrelation results when unit areas are larger and lower correlations when units are smaller, even though the data is the same, but just altered by scale.\nFor a complete overview of how spatial autocorrelation works, the methods behind calculations, and definitions of key terms, I recommend reading my GIS study of weapon possession crimes in West Midlands County (2023), specifically the spatial autocorrelation section here: https://vmistri91.github.io/Portfolio/social_atlas_weapons.html.\nThe first step of spatial autocorrelation is to define the neighbour relationship between the data zones in each set of data. For this report Queen’s Case contiguity will be used, which defines a data zone’s neighbours as zones which are adjacent with a common border to the main zone. Queen’s case is used instead of Rook’s case, as this only forms partial neighbour relations, which is inappropriate for this study. Fixed distance definition is not used as specifying a radius from each data zone may be unreliable, due to the nature of ethnicity data patterns, and the different scales of geographic regions being studied. The image below provides an illustration of how Queen’s Case contiguity works (Source: Oliveria et al., 2021).\n\n\n\n\n\n\n\n\n\nThe Queen’s case contiguity needs to be set for all of the different datasets below.\n\n#Set Queen neighbours for all datasets\nOA_neighbours_queen &lt;- OA_Ethnicity_London |&gt;\n    poly2nb(queen = T)\nLSOA_neighbours_queen &lt;- LSOA_Ethnicity_London |&gt;\n    poly2nb(queen = T)\nMSOA_neighbours_queen &lt;- MSOA_Ethnicity_London |&gt;\n    poly2nb(queen = T)\nWard_neighbours_queen &lt;- Ward_Ethnicity_London |&gt;\n    poly2nb(queen = T)\n\nNow a list of all the neighbour relations needs to be created in order to conduct the autocorrelation test.\n\n#Create neighbours list\nOA_spatial_weights_queen &lt;- OA_neighbours_queen |&gt;\n  nb2listw(style = \"W\")\nLSOA_spatial_weights_queen &lt;- LSOA_neighbours_queen |&gt;\n  nb2listw(style = \"W\")\nMSOA_spatial_weights_queen &lt;- MSOA_neighbours_queen |&gt;\n  nb2listw(style = \"W\")\nWard_spatial_weights_queen &lt;- Ward_neighbours_queen |&gt;\n  nb2listw(style = \"W\")\n\nLocal spatial autocorrelation measures identify the degree of clustering or dispersion of the data in each data zone across the entire study area. Moran’s I, which quantifies the degree of autocorrelation, providing correlation coefficients between an area and its neighbours, is used. A score is provided between 1 and -1, with 1 indicating perfect clustering, and -1 indicating perfect dispersion.\nWe first need to calculate local Moran’s I coefficients for the OA dataset. The result has complicated headings, so these can be simplified for ease. Once this is done, the values can be binded to the original OA_Ethnicity_London data frame.\n\n#Conduct Local Moran's I for OA\nOA_local_moran_queen &lt;- OA_Ethnicity_London |&gt;\n  pull(Indianperc) |&gt;\n  as.vector() |&gt;\n  localmoran(OA_spatial_weights_queen)\n\n#Inspect result\nhead(OA_local_moran_queen)\n\n          Ii          E.Ii     Var.Ii      Z.Ii Pr(z != E(Ii))\n1 0.26611689 -1.932836e-05 0.08492718 0.9132310      0.3611211\n2 0.10072585 -2.536921e-06 0.01337715 0.8709037      0.3838068\n3 0.09112807 -4.306515e-06 0.02838627 0.5409019      0.5885752\n4 0.17992777 -1.556351e-05 0.05128485 0.7945866      0.4268540\n5 0.17912212 -1.077305e-05 0.07100980 0.6722274      0.5014390\n6 0.15289529 -6.487213e-06 0.03420685 0.8267153      0.4083985\n\n#Update heading names\nOA_local_moran_queen &lt;- as.data.frame(OA_local_moran_queen)\nnames(OA_local_moran_queen) &lt;- c(\"LMI_Ii\", \"LMI_eIi\", \"LMI_varIi\", \"LMI_zIi\", \"LMI_sigP\")\n\n#Join the data frames together\nOA_Ethnicity_London &lt;- OA_Ethnicity_London |&gt;\n  mutate(OA_local_moran_queen)\n\nThe above steps can be repeated for the other different data zones as shown below.\n\n##### For LSOA #####\n#Conduct Local Moran's I for OA\nLSOA_local_moran_queen &lt;- LSOA_Ethnicity_London |&gt;\n  pull(Indianperc) |&gt;\n  as.vector() |&gt;\n  localmoran(LSOA_spatial_weights_queen)\n\n#Inspect result\nhead(LSOA_local_moran_queen)\n\n          Ii          E.Ii       Var.Ii      Z.Ii Pr(z != E(Ii))\n1 0.14512165 -3.468234e-05 0.0346117676 0.7802326      0.4352540\n2 0.15897758 -4.740157e-05 0.0591424933 0.6539063      0.5131721\n3 0.24751054 -5.556299e-05 0.0554487612 1.0513450      0.2931002\n4 0.10239062 -5.821126e-05 0.0483998297 0.4656773      0.6414465\n5 0.02153611 -6.204773e-06 0.0077419554 0.2448314      0.8065870\n6 0.03988094 -9.743883e-07 0.0008102028 1.4011323      0.1611745\n\n#Update heading names\nLSOA_local_moran_queen &lt;- as.data.frame(LSOA_local_moran_queen)\nnames(LSOA_local_moran_queen) &lt;- c(\"LMI_Ii\", \"LMI_eIi\", \"LMI_varIi\", \"LMI_zIi\", \"LMI_sigP\")\n\n#Join the data frames together\nLSOA_Ethnicity_London &lt;- LSOA_Ethnicity_London |&gt;\n  mutate(LSOA_local_moran_queen)\n\n##### For MSOA #####\n#Conduct Local Moran's I for OA\nMSOA_local_moran_queen &lt;- MSOA_Ethnicity_London |&gt;\n  pull(Indianperc) |&gt;\n  as.vector() |&gt;\n  localmoran(MSOA_spatial_weights_queen)\n\n#Inspect result\nhead(MSOA_local_moran_queen)\n\n          Ii          E.Ii      Var.Ii       Z.Ii Pr(z != E(Ii))\n1  0.1590915 -0.0001472235 0.014616879  1.3171080      0.1878024\n2 -0.0562219 -0.0000391453 0.006504324 -0.6966296      0.4860346\n3  0.1152409 -0.0001002666 0.012469230  1.0329147      0.3016438\n4  0.1490965 -0.0001836530 0.036650107  0.7797662      0.4355285\n5 -0.0548776 -0.0001461631 0.029169655 -0.3204581      0.7486211\n6  0.1410871 -0.0002790292 0.046351952  0.6566157      0.5114281\n\n#Update heading names\nMSOA_local_moran_queen &lt;- as.data.frame(MSOA_local_moran_queen)\nnames(MSOA_local_moran_queen) &lt;- c(\"LMI_Ii\", \"LMI_eIi\", \"LMI_varIi\", \"LMI_zIi\", \"LMI_sigP\")\n\n#Join the data frames together\nMSOA_Ethnicity_London &lt;- MSOA_Ethnicity_London |&gt;\n  mutate(MSOA_local_moran_queen)\n\n##### For Ward #####\n#Conduct Local Moran's I for OA\nWard_local_moran_queen &lt;- Ward_Ethnicity_London |&gt;\n  pull(Indianperc) |&gt;\n  as.vector() |&gt;\n  localmoran(Ward_spatial_weights_queen)\n\n#Inspect result\nhead(Ward_local_moran_queen)\n\n            Ii          E.Ii      Var.Ii       Z.Ii Pr(z != E(Ii))\n1  0.308941095 -4.286238e-04 0.041190367  1.5243334      0.1274254\n2 -0.009863986 -6.054243e-06 0.001366221 -0.2667014      0.7896990\n3  0.249721921 -4.844210e-04 0.054389069  1.0728586      0.2833345\n4  0.362365655 -5.418251e-04 0.052063014  1.5904912      0.1117241\n5  0.259994708 -4.469226e-04 0.050180767  1.1626306      0.2449794\n6  0.303945479 -5.171660e-04 0.087354712  1.0301272      0.3029503\n\n#Update heading names\nWard_local_moran_queen &lt;- as.data.frame(Ward_local_moran_queen)\nnames(Ward_local_moran_queen) &lt;- c(\"LMI_Ii\", \"LMI_eIi\", \"LMI_varIi\", \"LMI_zIi\", \"LMI_sigP\")\n\n#Join the data frames together\nWard_Ethnicity_London &lt;- Ward_Ethnicity_London |&gt;\n  mutate(Ward_local_moran_queen)\n\nUsing both Moran’s I values and statistical significance for each data zone, a Local Indicators of Spatial Autocorrelation (LISA) map can be created, as outlined by Anselin (1995) here https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1538-4632.1995.tb00338.x. The map creates 4 quadrants, which identify different types of spatial autocorrelation. Low-low identifies areas with low values surrounded by low values of crime and high-high identifies areas with high values surrounded by high values of crime. High-low identifies areas with a high value surrounded by areas with low values, and Low-high identifies areas with a low value surrounded by areas with high values, essentially identifying hexagons which are outliers.\nTo create this map, significance breaks and a significance level need to be set. In this study, the significance level is set to 0.05.\n\n#Set Significance breaks for each dataset\nOA_Ethnicity_London &lt;- OA_Ethnicity_London |&gt;\n  mutate(obs_diff = (Indianperc - mean(OA_Ethnicity_London$Indianperc)))\nLSOA_Ethnicity_London &lt;- LSOA_Ethnicity_London |&gt;\n  mutate(obs_diff = (Indianperc - mean(LSOA_Ethnicity_London$Indianperc)))\nMSOA_Ethnicity_London &lt;- MSOA_Ethnicity_London |&gt;\n  mutate(obs_diff = (Indianperc - mean(MSOA_Ethnicity_London$Indianperc)))\nWard_Ethnicity_London &lt;- Ward_Ethnicity_London |&gt;\n  mutate(obs_diff = (Indianperc - mean(Ward_Ethnicity_London$Indianperc)))\n\n#Compare local Local Moran's I value with mean value for each dataset\nOA_Ethnicity_London &lt;- OA_Ethnicity_London |&gt;\n  mutate(LMI_diff = (OA_Ethnicity_London$LMI_Ii - mean(OA_Ethnicity_London$LMI_Ii)))\nLSOA_Ethnicity_London &lt;- LSOA_Ethnicity_London |&gt;\n  mutate(LMI_diff = (LSOA_Ethnicity_London$LMI_Ii - mean(LSOA_Ethnicity_London$LMI_Ii)))\nMSOA_Ethnicity_London &lt;- MSOA_Ethnicity_London |&gt;\n  mutate(LMI_diff = (MSOA_Ethnicity_London$LMI_Ii - mean(MSOA_Ethnicity_London$LMI_Ii)))\nWard_Ethnicity_London &lt;- Ward_Ethnicity_London |&gt;\n  mutate(LMI_diff = (Ward_Ethnicity_London$LMI_Ii - mean(Ward_Ethnicity_London$LMI_Ii)))\n\n#Set significance threshold\nsignif &lt;- 0.05\n\nThe four different types of clusters can then be identified for each dataset, and colour palette can be selected for each of the maps which will be produced for each set of data.\n\n#Set the four types of clusters that can be present for each set of data\nOA_Ethnicity_London &lt;- OA_Ethnicity_London |&gt;\n  mutate(cluster_type = case_when(\n    obs_diff &gt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"High-High\",\n    obs_diff &lt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"Low-Low\",\n    obs_diff &lt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"Low-High\",\n    obs_diff &gt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"High-Low\",\n    LMI_sigP &gt; signif ~ \"No Significance\"))\nLSOA_Ethnicity_London &lt;- LSOA_Ethnicity_London |&gt;\n  mutate(cluster_type = case_when(\n    obs_diff &gt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"High-High\",\n    obs_diff &lt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"Low-Low\",\n    obs_diff &lt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"Low-High\",\n    obs_diff &gt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"High-Low\",\n    LMI_sigP &gt; signif ~ \"No Significance\"))\nMSOA_Ethnicity_London &lt;- MSOA_Ethnicity_London |&gt;\n  mutate(cluster_type = case_when(\n    obs_diff &gt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"High-High\",\n    obs_diff &lt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"Low-Low\",\n    obs_diff &lt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"Low-High\",\n    obs_diff &gt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"High-Low\",\n    LMI_sigP &gt; signif ~ \"No Significance\"))\nWard_Ethnicity_London &lt;- Ward_Ethnicity_London |&gt;\n  mutate(cluster_type = case_when(\n    obs_diff &gt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"High-High\",\n    obs_diff &lt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"Low-Low\",\n    obs_diff &lt; 0 & LMI_diff &gt; 0 & LMI_sigP &lt; signif ~ \"Low-High\",\n    obs_diff &gt; 0 & LMI_diff &lt; 0 & LMI_sigP &lt; signif ~ \"High-Low\",\n    LMI_sigP &gt; signif ~ \"No Significance\"))\n\n#Count cluster types for each dataset\ncount(OA_Ethnicity_London, cluster_type)\n\nSimple feature collection with 4 features and 2 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 503574.2 ymin: 155850.8 xmax: 561956.7 ymax: 200933.6\nProjected CRS: OSGB36 / British National Grid\n     cluster_type     n                       geometry\n1       High-High  2614 MULTIPOLYGON (((510039.9 17...\n2        High-Low   394 MULTIPOLYGON (((509270.8 17...\n3         Low-Low   142 MULTIPOLYGON (((512347 1732...\n4 No Significance 23219 MULTIPOLYGON (((510797.4 17...\n\ncount(LSOA_Ethnicity_London, cluster_type)\n\nSimple feature collection with 4 features and 2 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 503574.2 ymin: 155850.8 xmax: 561956.7 ymax: 200933.6\nProjected CRS: OSGB36 / British National Grid\n     cluster_type    n                       geometry\n1       High-High  564 MULTIPOLYGON (((510255 1734...\n2        High-Low   67 MULTIPOLYGON (((510802.7 17...\n3         Low-Low   17 MULTIPOLYGON (((531353.8 17...\n4 No Significance 4346 MULTIPOLYGON (((520076.5 16...\n\ncount(MSOA_Ethnicity_London, cluster_type)\n\nSimple feature collection with 4 features and 2 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 503574.2 ymin: 155850.8 xmax: 561956.7 ymax: 200933.6\nProjected CRS: OSGB36 / British National Grid\n     cluster_type   n                       geometry\n1       High-High 119 MULTIPOLYGON (((512230.9 17...\n2        High-Low  25 MULTIPOLYGON (((508914.8 17...\n3         Low-Low   2 MULTIPOLYGON (((521062.4 18...\n4 No Significance 856 MULTIPOLYGON (((517992.6 16...\n\ncount(Ward_Ethnicity_London, cluster_type)\n\nSimple feature collection with 4 features and 2 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 503575 ymin: 155850.8 xmax: 561956.7 ymax: 200933.6\nProjected CRS: OSGB36 / British National Grid\n     cluster_type   n                       geometry\n1       High-High  80 MULTIPOLYGON (((509493.2 17...\n2        High-Low  13 MULTIPOLYGON (((511916.8 17...\n3         Low-Low   7 MULTIPOLYGON (((532685.5 17...\n4 No Significance 579 MULTIPOLYGON (((518494.4 16...\n\n#Create colour palette\npal &lt;- c(\"#ff2800\", \"#ff9480\", \"#133a7c\", \"#ffffff\")\n\nThe clusters have been identified and now LISA maps for each set of data zones can be created using the data above. First a map for OAs will be produced.\n\n#Create OA LISA map\ntm_shape(OA_Ethnicity_London) +\n  tm_fill(col = \"cluster_type\",\n              palette = pal,\n              title = \"Cluster Type\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2, \n             col = 'black', \n             alpha = 1) +\n  tm_layout(main.title = \"LISA map of Asian:Indian ethnicity in London by OA\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThis LISA map shows that there are 2 large high-high clusters of Asian:Indian people in London. The first being across all of Harrow, North Brent (Wembley) and East Hillingdon; the second being across South Hillingdon, West Ealing (Southall) and Central Hounslow. There are also significantly large high-high clusters in Redbridge, North Newham (Ilford), Central Havering, and Croydon. This map also identifies low-low clusters in areas of North London, such as Enfield and Haringey, and South London, in Richmond, Bromley, and Wandsworth. There are some high-low clusters identified in some areas on the edges of the main high-high clusters, but nothing notable. The very detailed nature of this map, showing many different types of clusters across London is a result of using smaller OA data zones, capturing the intricacies of smaller neighbourhoods across London.\nNow the LSOA LISA map can be created.\n\n#Create LSOA LISA map\ntm_shape(LSOA_Ethnicity_London) +\n  tm_fill(col = \"cluster_type\",\n              palette = pal,\n              title = \"Cluster Type\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2, \n             col = 'black', \n             alpha = 1) +\n  tm_layout(main.title = \"LISA map of Asian:Indian ethnicity in London by LSOA\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nWhile the main high-high cluster areas are still clearly visible on the map, the larger size of LSOAs has meant that many low-low clusters, such as those identified above, are not classed as significant and are not mapped. This is as a result of the scale effect, where data variations across the different OAs have been smoothed upon the creation of LSOAs. However, the trends visible in this map are still suitable for analysis, as the clusters removed were small, and the main trends still remain, but when analysing this map, it should be noted that this is not the most accurate depiction of the clusters.\nNow the MSOA LISA map can be created.\n\n#Create MSOA LISA map\ntm_shape(MSOA_Ethnicity_London) +\n  tm_fill(col = \"cluster_type\",\n              palette = pal,\n              title = \"Cluster Type\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2, \n             col = 'black', \n             alpha = 1) +\n  tm_layout(main.title = \"LISA map of Asian:Indian ethnicity in London by MSOA\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nThis map has generalised the data even more. The first thing to note is that the Harrow/Brent cluster has now been combined with the Hounslow/Hillingdon/Ealing cluster, providing a misleading depiction that Asian:Indians are clustered in this very large connected region. Additionally the same merge has occurred in East London between the two large clusters. Another thing to note is that the clusters in Croydon have disappeared in this map, which is misleading in the analysis, as there are clusters of Asian:Indians in that region (as shown in previous maps), but the trends have been generalised and smoothed here. Further to this, all the small low-low clusters in South London have been removed leaving only two rather uninformative clusters at the edge of Hillingdon, and in Brent (Harlesden).\nFinally, a LISA map for the Ward level data can be produced.\n\n#Create Ward LISA map\ntm_shape(Ward_Ethnicity_London) +\n  tm_fill(col = \"cluster_type\",\n              palette = pal,\n              title = \"Cluster Type\") +\n  tm_borders(lwd=0.1, \n             col = 'black', \n             alpha = 0.1) +\n  tm_shape(London_Boroughs) +\n  tm_borders(lwd=2, \n             col = 'black', \n             alpha = 1) +\n  tm_layout(main.title = \"LISA map of Asian:Indian ethnicity in London by Ward\",\n            main.title.fontface = 2,\n            legend.outside = TRUE,\n            frame = FALSE,\n            legend.outside.position = \"right\",\n            legend.title.size = 1,\n            legend.title.fontface = 2) +\n  tm_compass(type = \"arrow\",\n             position = c(\"right\", \"bottom\")) +\n  tm_scale_bar(breaks = c(0, 5, 10, 15, 20),\n               position = c(\"left\", \"bottom\")) +\n  tm_credits('Data source: ONS, NOMIS',\n             fontface = 'italic',\n             align = 'right',\n             size = 0.5)\n\n\n\n\n\n\n\n\nWith similar a similar number of data zones as the MSOA map, this ward LISA map is a good indication of how the zoning effect of the MAUP can affect calculations. The first thing to note is that more low-low clusters have reappeared across many of the boroughs as a result of the re-zoning. Additionally, the high-high clusters in East London have been split by high-low clusters in this map, but overall this map has similar trends to the MSOA map, due to the sizes of the zones being the same.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#conclusions",
    "href": "maup_illustrated.html#conclusions",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "Conclusions",
    "text": "Conclusions\nThe choropleth and LISA maps both provide a clear illustration of how significant and important the MAUP is in mapping. While this example is across a smaller set of data being used for illustrative purposes, many larger studies must account for the MAUP in their methods and their findings, otherwise they are open to criticism and errors from the scale and zoning effects. The first set of maps produced show how the same data can be presented very differently due to the different spatial levels of data aggregation occurring. The second set of maps show how these different geographic levels of analysis can impact statistical tests on data which are commonly used in many studies relying on geographic data. While the differences between OAs and LSOAs, or MSOAs and Wards are not extreme, the major issues occur when different studies use OAs and MSOAs to present the same data, or the same study does not keep the geography level consistent throughout the report. This report has shown the effects of scale and zoning (MSOA vs Ward) on data. Overall, this report shows the extreme significance of the MAUP in GIS, and how it is critical to account for and mitigate these impacts.\nThere are ways to mitigate the impacts of the MAUP, such as keeping the geography level consistent throughout a study, comparing what levels are used in previous studies, and stating why a specific geography unit level is chosen for the study. My favourite mitigation strategy is to create equally sized zones across a study area to aggregate data into. Creating a hexagon or square grid across the study area and counting points, as outlined by Wong, 2021 here: https://urbandatapalette.com/post/2021-08-tessellation-sf/ is a very good method of standardising the geography of the study area and to significantly reduce the impacts of the scale and zoning effects on the study. Unfortunately as all 2021 England Census data is pre-aggregated and can only be downloaded by specific unit area (e.g. LSOA/Ward), it is not possible to do this in this report. However this method works with point data, such as British Police Crime Data, and if you would like to view this method in action, check out my GIS study of weapon possession crimes in West Midlands County (2023) here: https://vmistri91.github.io/Portfolio/social_atlas_weapons.html, where most geospatial analysis in this study is conducted using a hexagonal grid to count crimes.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  },
  {
    "objectID": "maup_illustrated.html#references",
    "href": "maup_illustrated.html#references",
    "title": "The Multiple Aerial Unit Problem Illustrated",
    "section": "References",
    "text": "References\nAnselin, L. (1995) ‘Local Indicators of Spatial Association—LISA’, Geographical Analysis, 27, 2, 93-115, https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1538-4632.1995.tb00338.x.\nBernard, C. (2019) Immersing evolving geographic divisions in the semantic web, Grenoble: Universite Grenoble Alpes, https://www.researchgate.net/publication/340376528_Immersing_evolving_geographic_divisions_in_the_semantic_Web.\nFotheringham, A.S. and D.W.S Wong (1991) ‘The modifiable areal unit problem in multivariate statistical analysis’, Environment and Planning A, 23, 1, 1025-1044, https://journals.sagepub.com/doi/10.1068/a231025.\nGimond, M. (2023) Intro to GIS and spatial analysis, ‘Chapter 13: Spatial autocorrelation’, https://mgimond.github.io/Spatial/spatial-autocorrelation.html.\nLee, S. (2019) ‘Uncertainty in the effects of the modifiable areal unit problem under different levels of spatial autocorrelation: a simulation study’, International Journal of Geographical Information Science, 33, 1, 1135-1154, https://www.tandfonline.com/doi/full/10.1080/13658816.2018.1542699.\nLivings, M. and A.M. Wu (2020) ‘Local Measures of Spatial Association’ The Geographic Information Science & Technology Body of Knowledge (3rd Quarter 2020 Edition), John P. Wilson (Ed.), https://gistbok-topics.ucgis.org/AM-03-023.\nLovelace, R., Nowosad, J. and Muenchow, J. (2021) ‘Chapter 4: Spatial data operations’, Geocomputation with R, https://bookdown.org/robinlovelace/geocompr/spatial-operations.html.\nOliveira, G.L.A., L. Lima, I. Silva, M.C. Riberio-Dantas, K.H. Monterio and P.T. Endo (2021) ‘Evaluating Social Distancing Measures and Their Association with the Covid-19 Pandemic in South America’, International Journal of Geo-Information, 10, 121, 1-35, https://www.researchgate.net/publication/349718331_Evaluating_Social_Distancing_Measures_and_Their_Association_with_the_Covid-19_Pandemic_in_South_America.\nWong, D. (2009) ‘Modifiable Areal Unit Problem’, International Encyclopedia of Human Geography, 169-174, https://www.sciencedirect.com/science/article/abs/pii/B9780080449104004752.\nWong, K. (2021) ‘Create spatial square/hexagon grids and count points inside in R with sf’, Hong Kong: Urban Data Palette, https://urbandatapalette.com/post/2021-08-tessellation-sf/.",
    "crumbs": [
      "About",
      "The Multiple Aerial Unit Problem Illustrated"
    ]
  }
]